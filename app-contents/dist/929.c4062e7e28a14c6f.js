"use strict";(self.webpackChunkvristo_angular=self.webpackChunkvristo_angular||[]).push([[929],{8929:(T,v,n)=>{n.r(v),n.d(v,{AddFloorModule:()=>S});var s=n(6895),e=n(3559),t=n(4650),u=n(3407),g=n(9872),h=n(2477),a=n(5603),i=n(4006),A=n(7433),M=n(4463);function r(p,O){if(1&p){const o=t.EpF();t.TgZ(0,"tr",20)(1,"th",21),t._uU(2),t.qZA(),t.TgZ(3,"td",22)(4,"input",23),t.NdJ("ngModelChange",function(l){const C=t.CHM(o).$implicit;return t.KtG(C.name=l)}),t.qZA()(),t.TgZ(5,"td",22)(6,"input",23),t.NdJ("ngModelChange",function(l){const C=t.CHM(o).$implicit;return t.KtG(C.description=l)}),t.qZA()(),t.TgZ(7,"td",22)(8,"button",24),t.NdJ("click",function(){const f=t.CHM(o).index,C=t.oxw();return t.KtG(C.deleteRow("lstTables",f))}),t._UZ(9,"icon-trash-lines",25),t.qZA()()()}if(2&p){const o=O.$implicit,c=O.index;t.xp6(2),t.hij(" ",c+1," "),t.xp6(2),t.Q6J("ngModel",o.name),t.xp6(2),t.Q6J("ngModel",o.description)}}const F=function(p){return{"is-invalid":p}},m=[{path:"",component:(()=>{class p{constructor(o,c,l,f){this.lookupsService=o,this.accountingService=c,this.common=l,this.route=f,this.lang="labelEn",this.modal={},this.lstData=[],this.lstLkpKeys=[],this.lstLkps={},this.reqFields=["name"],this.inputFailds={},this.Id=this.route.snapshot.paramMap.get("id"),this.common.loadLkps(this.lstLkpKeys,this.lstLkps)}ngOnInit(){this.pageInit()}pageInit(){this.Id?this.GetDetails(this.Id):this.modal={isActive:"true"}}GetDetails(o){this.accountingService.FloorDetails({id:o}).subscribe(c=>{this.modal=this.parseObjFromServer(c)})}parseObjFromServer(o){return o.isActive=1==o.isActive?"true":"false",o}prepareObjToServer(o){return o.isActive="true"==o.isActive,o}save(){let o=this.common.checkValidation(this.modal,this.reqFields);if(o.isValid){let c=this.prepareObjToServer(this.modal);this.accountingService.AddFloor(c).subscribe({next:l=>{this.inputFailds={},l.status&&(this.common.success("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638"),this.Id=l.entityId,this.GetDetails(this.Id)),l.lstError.length>0&&this.common.error("Error",l.lstError[0])},error:l=>{this.common.error("Fill required fields","")}})}else this.inputFailds=o.failerFields,this.common.error("Fill required fields","")}back(){this.common.navigateTo("../system/floors")}deleteRow(o,c){this.modal[o].splice(c,1)}newRow(o){this.modal[o]||(this.modal[o]=[]),this.modal[o].push({})}static#t=this.\u0275fac=function(c){return new(c||p)(t.Y36(u.K),t.Y36(g.S),t.Y36(h.j),t.Y36(e.gz))};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["app-add-floor"]],decls:49,vars:36,consts:[[1,"panel"],[1,"mb-4","font-semibold","dark:text-white-light","text-lg"],[1,"gap-3","grid","grid-cols-3"],[1,"space-y-2","col-span-1"],["type","text","disabled","",1,"form-input",3,"ngModel","ngModelChange"],["type","text",1,"form-input",3,"ngModel","ngClass","ngModelChange"],[1,"form-label"],["rows","6",1,"form-input",3,"ngModel","ngModelChange"],[1,"col-span-2"],[3,"image","height","imageSelected"],[1,"flex","justify-end","mb-2"],[1,"mt-1","btn","btn-primary",3,"click"],[1,"w-full","text-gray-500","dark:text-gray-400","text-sm","text-left","rtl:text-right"],[1,"text-gray-700","dark:text-gray-400","text-xs","uppercase"],[1,"bg-gray-50","dark:bg-gray-800","px-6","py-3"],[1,"px-6","py-3"],["class","border-gray-200 dark:border-gray-700 border-b",4,"ngFor","ngForOf"],[1,"flex","justify-end"],[1,"me-2","mt-1","btn","btn-danger",3,"click"],[1,"mt-1","btn","btn-success",3,"click"],[1,"border-gray-200","dark:border-gray-700","border-b"],[1,"f-col"],[1,"px-6","py-4"],["type","text",1,"form-input",3,"ngModel","ngModelChange"],["type","button",1,"ml-auto","hover:text-danger",3,"click"],[1,"w-4.5","h-4.5"]],template:function(c,l){1&c&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"div")(7,"label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"input",4),t.NdJ("ngModelChange",function(C){return l.modal.id=C}),t.qZA()(),t.TgZ(11,"div")(12,"label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"input",5),t.NdJ("ngModelChange",function(C){return l.modal.name=C}),t.qZA()(),t.TgZ(16,"div")(17,"label",6),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"textarea",7),t.NdJ("ngModelChange",function(C){return l.modal.description=C}),t.qZA()()(),t.TgZ(21,"div",8)(22,"app-file-upload",9),t.NdJ("imageSelected",function(C){return l.modal.img=C}),t.qZA()()()(),t.TgZ(23,"div",0)(24,"div",10)(25,"a",11),t.NdJ("click",function(){return l.newRow("lstTables")}),t._uU(26),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"table",12)(29,"thead",13)(30,"tr")(31,"th",14),t._uU(32," # "),t.qZA(),t.TgZ(33,"th",15),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th",15),t._uU(37),t.ALo(38,"translate"),t.qZA()()(),t.TgZ(39,"tbody"),t.YNc(40,r,10,3,"tr",16),t.qZA()()(),t.TgZ(41,"div",0)(42,"div",17)(43,"a",18),t.NdJ("click",function(){return l.back()}),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"a",19),t.NdJ("click",function(){return l.save()}),t._uU(47),t.ALo(48,"translate"),t.qZA()()()),2&c&&(t.xp6(2),t.hij(" ",t.lcZ(3,16,"FloorInfo"),""),t.xp6(6),t.Oqu(t.lcZ(9,18,"ID")),t.xp6(2),t.Q6J("ngModel",l.modal.id),t.xp6(3),t.Oqu(t.lcZ(14,20,"Name")),t.xp6(2),t.Q6J("ngModel",l.modal.name)("ngClass",t.VKq(34,F,l.inputFailds.name)),t.xp6(3),t.Oqu(t.lcZ(19,22,"Description")),t.xp6(2),t.Q6J("ngModel",l.modal.description),t.xp6(2),t.Q6J("image",l.modal.img)("height","350px"),t.xp6(4),t.Oqu(t.lcZ(27,24,"New")),t.xp6(8),t.hij(" ",t.lcZ(35,26,"Name")," "),t.xp6(3),t.hij(" ",t.lcZ(38,28,"Description")," "),t.xp6(3),t.Q6J("ngForOf",l.modal.lstTables),t.xp6(4),t.Oqu(t.lcZ(45,30,"Discard")),t.xp6(3),t.Oqu(t.lcZ(48,32,"Save")))},dependencies:[s.mk,s.sg,a.p,i.Fj,i.JJ,i.On,A.Y,M.X$]})}return p})()}];let _=(()=>{class p{static#t=this.\u0275fac=function(c){return new(c||p)};static#e=this.\u0275mod=t.oAB({type:p});static#n=this.\u0275inj=t.cJS({imports:[e.Bz.forChild(m),e.Bz]})}return p})();var x=n(9116),y=n(4868),Z=n(4180),b=n(1835),U=n(9886),L=n(7368);let S=(()=>{class p{static#t=this.\u0275fac=function(c){return new(c||p)};static#e=this.\u0275mod=t.oAB({type:p});static#n=this.\u0275inj=t.cJS({imports:[s.ez,_,x.Q,i.u5,y.tA,i.UX,M.aw,Z.$9,b.A0,U.zk,L.O]})}return p})()},7433:(T,v,n)=>{n.d(v,{Y:()=>M});var s=n(5861),e=n(4650),t=n(2477),u=n(6895);function g(r,F){1&r&&e.GkF(0)}const h=function(r){return{height:r}};function a(r,F){if(1&r){const d=e.EpF();e.TgZ(0,"div",3)(1,"label",4)(2,"div",5),e.YNc(3,g,1,0,"ng-container",6),e.qZA(),e.TgZ(4,"div",7),e._uU(5,"Upload your photo"),e.qZA(),e.TgZ(6,"input",8),e.NdJ("change",function(_){e.CHM(d);const x=e.oxw();return e.KtG(x.onFileSelected(_))}),e.qZA()()()}if(2&r){const d=e.oxw(),m=e.MAs(4);e.Q6J("ngStyle",e.VKq(4,h,d.height)),e.xp6(1),e.Q6J("for",d.uniqueId),e.xp6(2),e.Q6J("ngTemplateOutlet",m),e.xp6(3),e.Q6J("id",d.uniqueId)}}function i(r,F){if(1&r){const d=e.EpF();e.TgZ(0,"div",9)(1,"img",10),e.NdJ("click",function(){e.CHM(d);const _=e.oxw();return e.KtG(_.triggerFileInput())}),e.qZA(),e.TgZ(2,"input",8),e.NdJ("change",function(_){e.CHM(d);const x=e.oxw();return e.KtG(x.onFileSelected(_))}),e.qZA()()}if(2&r){const d=e.oxw();e.Q6J("ngStyle",e.VKq(3,h,d.height)),e.xp6(1),e.Q6J("src",d.imageUrl,e.LSH),e.xp6(1),e.Q6J("id",d.uniqueId)}}function A(r,F){1&r&&(e.O4$(),e.TgZ(0,"svg",11),e._UZ(1,"path",12)(2,"path",13)(3,"path",14),e.qZA())}let M=(()=>{class r{set image(d){this.imageUrl=this.common.getAttachemntUrl(d)}constructor(d){this.common=d,this.height="200px",this.uniqueId="file-input-"+Math.random().toString(36).substring(2,15),this.imageSelected=new e.vpe}onFileSelected(d){var m=this;return(0,s.Z)(function*(){const _=d.target.files[0];if(_){const x=new FileReader;x.onload=Z=>{m.imageUrl=Z.target.result},x.readAsDataURL(_);let y=yield m.common.saveFiles(_);m.imageUrl=m.common.getAttachemntUrl(m.imageUrl),m.imageSelected.emit(y)}})()}triggerFileInput(){document.getElementById(this.uniqueId).click()}static#t=this.\u0275fac=function(m){return new(m||r)(e.Y36(t.j))};static#e=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-file-upload"]],inputs:{height:"height",image:"image"},outputs:{imageSelected:"imageSelected"},decls:5,vars:2,consts:[["class","upload-container",3,"ngStyle",4,"ngIf","ngIfElse"],["imageTemplate",""],["imgSvg",""],[1,"upload-container",3,"ngStyle"],[1,"upload-label",3,"for"],[1,"upload-icon"],[4,"ngTemplateOutlet"],[1,"upload-text"],["type","file","hidden","",3,"id","change"],[1,"image-container",3,"ngStyle"],["alt","Uploaded photo",3,"src","click"],["xmlns","http://www.w3.org/2000/svg","width","50px","height","50px","viewBox","0 0 48 48","fill","none"],["d","M20.5152 7C18.9718 7 17.5496 7.83679 16.8 9.18602L15.5145 11.5H11.75C8.57436 11.5 6 14.0744 6 17.25V34.25C6 37.4256 8.57436 40 11.75 40H22.9963C22.6642 39.2037 22.4091 38.3672 22.2402 37.5H11.75C9.95507 37.5 8.5 36.0449 8.5 34.25V17.25C8.5 15.4551 9.95507 14 11.75 14H16.9855L18.9854 10.4001C19.2941 9.84456 19.8797 9.5 20.5152 9.5H27.4848C28.1203 9.5 28.7059 9.84456 29.0146 10.4001L31.0145 14H36.25C38.0449 14 39.5 15.4551 39.5 17.25V22.7999C40.3823 23.1255 41.2196 23.544 42 24.0436V17.25C42 14.0744 39.4256 11.5 36.25 11.5H32.4855L31.2 9.18602C30.4504 7.83679 29.0282 7 27.4848 7H20.5152Z","fill","#212121"],["d","M24 17C27.5278 17 30.5222 19.2834 31.586 22.4529C30.7711 22.6741 29.988 22.9726 29.2451 23.34C28.5411 21.1138 26.459 19.5 24 19.5C20.9624 19.5 18.5 21.9624 18.5 25C18.5 27.6415 20.3622 29.8481 22.8454 30.3786C22.5516 31.151 22.3292 31.9587 22.1865 32.7936C18.6418 31.972 16 28.7945 16 25C16 20.5817 19.5817 17 24 17Z","fill","#212121"],["d","M46 35C46 41.0751 41.0751 46 35 46C28.9249 46 24 41.0751 24 35C24 28.9249 28.9249 24 35 24C41.0751 24 46 28.9249 46 35ZM36 29C36 28.4477 35.5523 28 35 28C34.4477 28 34 28.4477 34 29V34H29C28.4477 34 28 34.4477 28 35C28 35.5523 28.4477 36 29 36H34V41C34 41.5523 34.4477 42 35 42C35.5523 42 36 41.5523 36 41V36H41C41.5523 36 42 35.5523 42 35C42 34.4477 41.5523 34 41 34H36V29Z","fill","#212121"]],template:function(m,_){if(1&m&&(e.YNc(0,a,7,6,"div",0),e.YNc(1,i,3,5,"ng-template",null,1,e.W1O),e.YNc(3,A,4,0,"ng-template",null,2,e.W1O)),2&m){const x=e.MAs(2);e.Q6J("ngIf",!_.imageUrl)("ngIfElse",x)}},dependencies:[u.O5,u.tP,u.PC],styles:[".upload-container[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:200px;border:2px dashed #b3b3b3;border-radius:10px;cursor:pointer;transition:background-color .3s}.upload-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:93%;height:93%}.upload-container[_ngcontent-%COMP%]:hover, .image-container[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.upload-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;cursor:pointer}.upload-icon[_ngcontent-%COMP%]{width:50px;height:50px}.upload-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.upload-text[_ngcontent-%COMP%]{margin-top:10px;font-size:16px;color:#b3b3b3}"]})}return r})()},7368:(T,v,n)=>{n.d(v,{O:()=>a});var s=n(6895),e=n(3559),t=n(7433),u=n(4650);const g=[{path:"",component:t.Y}];let h=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=u.oAB({type:i});static#n=this.\u0275inj=u.cJS({imports:[e.Bz.forChild(g),e.Bz]})}return i})(),a=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=u.oAB({type:i});static#n=this.\u0275inj=u.cJS({imports:[s.ez,h]})}return i})()},5603:(T,v,n)=>{n.d(v,{p:()=>g});var s=n(4650),e=n(6895);const t=["template"];function u(h,a){if(1&h&&(s.O4$(),s.TgZ(0,"svg",1),s._UZ(1,"path",2)(2,"path",3)(3,"path",4)(4,"path",5)(5,"path",6),s.qZA()),2&h){const i=s.oxw();s.Q6J("ngClass",i.class)}}let g=(()=>{class h{constructor(i){this.viewContainerRef=i,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(A){return new(A||h)(s.Y36(s.s_b))};static#e=this.\u0275cmp=s.Xpm({type:h,selectors:[["icon-trash-lines"]],viewQuery:function(A,M){if(1&A&&s.Gf(t,7),2&A){let r;s.iGM(r=s.CRH())&&(M.template=r.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["d","M20.5001 6H3.5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M18.8334 8.5L18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M9.5 11L10 16","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M14.5 11L14 16","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M6.5 6C6.55588 6 6.58382 6 6.60915 5.99936C7.43259 5.97849 8.15902 5.45491 8.43922 4.68032C8.44784 4.65649 8.45667 4.62999 8.47434 4.57697L8.57143 4.28571C8.65431 4.03708 8.69575 3.91276 8.75071 3.8072C8.97001 3.38607 9.37574 3.09364 9.84461 3.01877C9.96213 3 10.0932 3 10.3553 3H13.6447C13.9068 3 14.0379 3 14.1554 3.01877C14.6243 3.09364 15.03 3.38607 15.2493 3.8072C15.3043 3.91276 15.3457 4.03708 15.4286 4.28571L15.5257 4.57697C15.5433 4.62992 15.5522 4.65651 15.5608 4.68032C15.841 5.45491 16.5674 5.97849 17.3909 5.99936C17.4162 6 17.4441 6 17.5 6","stroke","currentColor","stroke-width","1.5"]],template:function(A,M){1&A&&s.YNc(0,u,6,1,"ng-template",null,0,s.W1O)},dependencies:[e.mk],encapsulation:2})}return h})()},9872:(T,v,n)=>{n.d(v,{S:()=>u});var s=n(4650),e=n(1801),t=n(2477);let u=(()=>{class g{constructor(a,i){this.http=a,this.common=i,this.mainRoute="Accounting"}AddFloor(a){return this.http.post(`${this.mainRoute}/AddFloor`,a)}FloorDetails(a){return this.http.getWithObj(`${this.mainRoute}/FloorDetails`,a)}FloorsList(a){return this.http.getWithObj(`${this.mainRoute}/FloorsList`,a)}GetTablesStatuses(a){return this.http.getWithObj(`${this.mainRoute}/GetTablesStatuses`,a)}AddShift(a){return this.http.post(`${this.mainRoute}/AddShift`,a)}ShiftDetails(a){return this.http.getWithObj(`${this.mainRoute}/ShiftDetails`,a)}ShiftsList(a){return this.http.getWithObj(`${this.mainRoute}/ShiftsList`,a)}static#t=this.\u0275fac=function(i){return new(i||g)(s.LFG(e.q),s.LFG(t.j))};static#e=this.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);
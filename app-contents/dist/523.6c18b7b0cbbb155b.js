"use strict";(self.webpackChunkvristo_angular=self.webpackChunkvristo_angular||[]).push([[523],{9523:(ce,m,a)=>{a.r(m),a.d(m,{UsersCuModule:()=>ae});var d=a(6895),_=a(3559),e=a(4650),h=a(6467),x=a(2477),p=a(4463),c=a(4006),C=a(5883),f=a(5299),v=a(8060),Z=a(8545),b=a(5344),T=a(5603),M=a(2637),u=a(1835),A=a(7433);function U(n,i){1&n&&e._UZ(0,"icon-save")}function J(n,i){1&n&&e._UZ(0,"span",12)}function q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"h5",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",8)(5,"a",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.back())}),e._UZ(6,"icon-arrow-backward"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"a",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e.YNc(10,U,1,0,"icon-save",4),e.YNc(11,J,1,0,"span",11),e._uU(12),e.ALo(13,"translate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,5,"UserInfo")," "),e.xp6(5),e.hij(" ",e.lcZ(8,7,"Back")," "),e.xp6(3),e.Q6J("ngIf",!t.saving),e.xp6(1),e.Q6J("ngIf",t.saving),e.xp6(1),e.hij(" ",e.lcZ(13,9,"Save")," ")}}function y(n,i){1&n&&e.GkF(0)}const I=function(n){return{"!border-primary text-primary":n}},N=function(n){return{tab:n}};function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"a",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.selectTab(l))}),e.YNc(1,y,1,0,"ng-container",17),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&n){const t=i.$implicit;e.oxw();const s=e.MAs(3),o=e.oxw();e.Q6J("ngClass",e.VKq(6,I,o.selectedTab.value===t.value)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(8,N,t)),e.xp6(1),e.hij(" ",e.lcZ(3,4,t.label)," ")}}function L(n,i){1&n&&(e.ynx(0),e._UZ(1,"icon-user",18),e.BQk())}function Q(n,i){1&n&&(e.ynx(0),e._UZ(1,"icon-airplay",18),e.BQk())}function k(n,i){1&n&&(e.ynx(0),e._UZ(1,"icon-menu-datatables",18),e.BQk())}function O(n,i){if(1&n&&(e.YNc(0,L,2,0,"ng-container",4),e.YNc(1,Q,2,0,"ng-container",4),e.YNc(2,k,2,0,"ng-container",4)),2&n){const t=i.tab;e.Q6J("ngIf",0==t.value),e.xp6(1),e.Q6J("ngIf",1==t.value),e.xp6(1),e.Q6J("ngIf",2==t.value)}}function D(n,i){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,w,4,10,"a",14),e.YNc(2,O,3,3,"ng-template",null,15,e.W1O),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tabs)}}function F(n,i){1&n&&(e.TgZ(0,"h6",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"MainInfo")))}function K(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",44)(1,"app-file-upload",45),e.NdJ("imageSelected",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.profilePic=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("image",t.model.profilePic)("height","350px")}}function G(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",33),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.phone2=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,2,"Phone"),"2"),e.xp6(2),e.Q6J("ngModel",t.model.phone2)}}function H(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",46),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",47),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.email=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"Email")),e.xp6(2),e.Q6J("ngModel",t.model.email)}}function Y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.cityId=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"City")),e.xp6(2),e.Q6J("items",t.lstLkps.City)("ngModel",t.model.cityId)}}function E(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",48),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.idNumber=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"IDNumber")),e.xp6(2),e.Q6J("ngModel",t.model.idNumber)}}function j(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.defaultPriceListId=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"RelatedPrice")),e.xp6(2),e.Q6J("items",t.lstLkps.ItemsPricesLists)("ngModel",t.model.defaultPriceListId)}}const g=function(n){return[n]};function B(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",19),e.YNc(2,F,3,3,"h6",20),e.TgZ(3,"div",21),e.YNc(4,K,2,2,"div",22),e.TgZ(5,"div",23)(6,"div")(7,"label",24),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",25),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.id=o)}),e.qZA()(),e.TgZ(11,"div",26)(12,"label",27)(13,"input",28),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.isActive=o)}),e.qZA(),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"div",29)(18,"label",30),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"input",31),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.nameEn=o)}),e.qZA()(),e.TgZ(22,"div",29)(23,"label",32),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"input",31),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.nameAr=o)}),e.qZA()(),e.TgZ(27,"div")(28,"label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"input",33),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.phone1=o)}),e.qZA()(),e.YNc(32,G,5,4,"div",4),e.YNc(33,H,5,4,"div",4),e.ynx(34),e.TgZ(35,"div")(36,"label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"ng-select",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.genderId=o)}),e.qZA()(),e.YNc(40,Y,5,5,"div",4),e.YNc(41,E,5,4,"div",4),e.TgZ(42,"div")(43,"label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"input",35),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.age=o)})("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.calculateBirthDate())}),e.qZA()(),e.TgZ(47,"div")(48,"label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"input",36),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.birthDate=o)}),e.qZA()(),e.BQk(),e.TgZ(52,"div")(53,"div",37)(54,"label",38),e._uU(55,"Branches"),e.qZA(),e.TgZ(56,"ng-select",39),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model._lstBranches=o)}),e.qZA()()(),e.TgZ(57,"div")(58,"div",37)(59,"label",38),e._uU(60,"Departments"),e.qZA(),e.TgZ(61,"ng-select",39),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model._lstDepartments=o)}),e.qZA()()(),e.YNc(62,j,5,5,"div",4),e.qZA()()(),e.TgZ(63,"div",40)(64,"h6",41),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"div",21)(68,"div",42)(69,"div")(70,"label"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"input",43),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.emergencyContactName=o)}),e.qZA()(),e.TgZ(74,"div")(75,"label"),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"input",43),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.emergencyContactPhone=o)}),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.isModal?"":" rounded-md border border-[#ebedf2] bg-white p-4 dark:border-[#191e3a] dark:bg-[#0e1726]"),e.xp6(1),e.Q6J("ngIf",!t.isModal),e.xp6(2),e.Q6J("ngIf",!t.isModal),e.xp6(1),e.Q6J("ngClass",e.VKq(61,g,t.isModal?"gap-1":"gap-5")),e.xp6(3),e.Oqu(e.lcZ(9,39,"ID")),e.xp6(2),e.Q6J("ngModel",t.model.id),e.xp6(3),e.Q6J("ngModel",t.model.isActive),e.xp6(2),e.Oqu(e.lcZ(16,41,"Active")),e.xp6(2),e.Q6J("ngClass",t.inputFailds.nameEn?"has-error":""),e.xp6(2),e.Oqu(e.lcZ(20,43,"EnglishName")),e.xp6(2),e.Q6J("ngModel",t.model.nameEn),e.xp6(1),e.Q6J("ngClass",t.inputFailds.nameAr?"has-error":""),e.xp6(2),e.Oqu(e.lcZ(25,45,"ArabicName")),e.xp6(2),e.Q6J("ngModel",t.model.nameAr),e.xp6(3),e.hij("",e.lcZ(30,47,"Phone"),"1"),e.xp6(2),e.Q6J("ngModel",t.model.phone1),e.xp6(1),e.Q6J("ngIf",!t.isModal),e.xp6(1),e.Q6J("ngIf",!t.isModal),e.xp6(4),e.Oqu(e.lcZ(38,49,"Gender")),e.xp6(2),e.Q6J("items",t.lstLkps.Gender)("ngModel",t.model.genderId),e.xp6(1),e.Q6J("ngIf",!t.isModal),e.xp6(1),e.Q6J("ngIf",!t.isModal),e.xp6(3),e.Oqu(e.lcZ(45,51,"Age")),e.xp6(2),e.Q6J("ngModel",t.model.age),e.xp6(3),e.Oqu(e.lcZ(50,53,"BirthDate")),e.xp6(2),e.Q6J("ngModel",t.model.birthDate),e.xp6(5),e.Q6J("items",t.lstLkps.Branch)("multiple",!0)("ngModel",t.model._lstBranches),e.xp6(5),e.Q6J("items",t.lstLkps.Departments)("multiple",!0)("ngModel",t.model._lstDepartments),e.xp6(1),e.Q6J("ngIf",!t.isModal),e.xp6(3),e.Oqu(e.lcZ(66,55,"EmergencyInfo")),e.xp6(6),e.Oqu(e.lcZ(72,57,"ContactName")),e.xp6(2),e.Q6J("ngModel",t.model.emergencyContactName),e.xp6(3),e.Oqu(e.lcZ(77,59,"ContactPhone")),e.xp6(2),e.Q6J("ngModel",t.model.emergencyContactPhone)}}function S(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.subUserTypeId=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"OtherUserType")),e.xp6(2),e.Q6J("items",t.lstLkps.OtherUserType)("ngModel",t.model.subUserTypeId)}}function P(n,i){1&n&&e._UZ(0,"div")}function R(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",27)(2,"input",59),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit,re=e.oxw(3);return e.KtG(re.model._permissions[r.value]=o)}),e.qZA(),e.TgZ(3,"span",60),e._uU(4),e.qZA()()()}if(2&n){const t=i.$implicit,s=e.oxw(3);e.xp6(2),e.Q6J("ngModel",s.model._permissions[t.value]),e.xp6(2),e.Oqu(t.label)}}function V(n,i){if(1&n&&(e.TgZ(0,"div",55)(1,"h5",56),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",57),e.YNc(5,R,5,2,"div",58),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"Permissions"),""),e.xp6(3),e.Q6J("ngForOf",t.lstPermissions)}}function $(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",40)(2,"h6",41),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",21)(6,"div",42)(7,"div")(8,"label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"ng-select",49),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.userType=o)}),e.qZA()(),e.YNc(12,S,5,5,"div",50),e.YNc(13,P,1,0,"ng-template",null,51,e.W1O),e.TgZ(15,"div")(16,"label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"input",52),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.userName=o)}),e.qZA()(),e.TgZ(20,"div")(21,"label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"input",53),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.password=o)}),e.qZA()()()()(),e.ynx(25),e.YNc(26,V,6,4,"div",54),e.BQk(),e.qZA()}if(2&n){const t=e.MAs(14),s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,12,"AccountInfo")),e.xp6(6),e.Oqu(e.lcZ(10,14,"UserType")),e.xp6(2),e.Q6J("items",s.lstLkps.lstUserTypes)("clearable",!1)("ngModel",s.model.userType),e.xp6(1),e.Q6J("ngIf",6==s.model.userType)("ngIfElse",t),e.xp6(5),e.Oqu(e.lcZ(18,16,"UserName")),e.xp6(2),e.Q6J("ngModel",s.model.userName),e.xp6(3),e.Oqu(e.lcZ(23,18,"Password")),e.xp6(2),e.Q6J("ngModel",s.model.password),e.xp6(2),e.Q6J("ngIf",s.model&&s.model._permissions)}}function W(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",67),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"ng-select",34),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.relatedLkpId=o)}),e.qZA()(),e.TgZ(5,"td")(6,"app-file-upload",45),e.NdJ("imageSelected",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.model.relatedAttachment=o)}),e.qZA()(),e.TgZ(7,"td")(8,"input",31),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.desc=o)}),e.qZA()(),e.TgZ(9,"td",66)(10,"button",68),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.removeRow("lstAttachments",l))}),e._UZ(11,"icon-trash-lines"),e.qZA()()()}if(2&n){const t=i.$implicit,s=i.index,o=e.oxw(2);e.xp6(2),e.hij(" ",s," "),e.xp6(2),e.Q6J("items",o.lstLkps.AttachmentType)("ngModel",t.relatedLkpId),e.xp6(2),e.Q6J("image",o.model.relatedAttachment)("height","350px"),e.xp6(2),e.Q6J("ngModel",t.desc)}}function X(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",61)(2,"h6",41),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",62)(6,"a",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addRow("lstAttachments"))}),e._UZ(7,"icon-plus"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",64)(11,"table",65)(12,"thead")(13,"tr")(14,"th"),e._uU(15,"#"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",66),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"tbody"),e.YNc(29,W,12,6,"tr",58),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,7,"RelatedAttachments")),e.xp6(5),e.hij(" ",e.lcZ(9,9,"Add")," "),e.xp6(9),e.Oqu(e.lcZ(18,11,"AttachmentType")),e.xp6(3),e.hij("",e.lcZ(21,13,"Attachment")," "),e.xp6(3),e.Oqu(e.lcZ(24,15,"Note")),e.xp6(3),e.Oqu(e.lcZ(27,17,"Actions")),e.xp6(3),e.Q6J("ngForOf",t.model.lstAttachments)}}function z(n,i){1&n&&e._UZ(0,"icon-save")}function ee(n,i){1&n&&e._UZ(0,"span",12)}function te(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",69)(1,"button",70),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.closeDialog())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e.YNc(5,z,1,0,"icon-save",4),e.YNc(6,ee,1,0,"span",11),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"Discard")),e.xp6(3),e.Q6J("ngIf",!t.saving),e.xp6(1),e.Q6J("ngIf",t.saving),e.xp6(1),e.hij(" ",e.lcZ(8,6,"Save")," ")}}const ne=[{path:"",component:(()=>{class n{set SetInitial(t){t.Id&&(this.Id=t.Id),this.isModal=!0,this.pageInit()}constructor(t,s,o,l){this.accountService=t,this.common=s,this.route=o,this.translate=l,this.isModal=!1,this.lstPermissions=[{label:"Dashboard",value:"Dashboard"},{label:"CompanyInfo",value:"CompanyInfo"},{label:"UsersList",value:"UsersList"},{label:"ReceiptVouchers",value:"ReceiptVouchers"},{label:"PaymentVouchers",value:"PaymentVouchers"},{label:"DepartmentsList",value:"DepartmentsList"},{label:"ItemsList",value:"ItemsList"},{label:"InvoicesList",value:"InvoicesList"},{label:"AccountStatement",value:"AccountStatement"},{label:"FinancialReport",value:"FinancialReport"},{label:"DebitReport",value:"DebitReport"},{label:"LookupsList",value:"LookupsList"},{label:"POS",value:"POS"}],this.model={},this.lstLkpKeys=["Gender","City","ItemsPricesLists","lstUserTypes","AttachmentType","Branch","Departments"],this.lstLkps={},this.loading=!1,this.reqFields=["nameAr"],this.inputFailds={},this.saving=!1,this.tabs=[{label:"MainInfo",value:0},{label:"AccountInfo",value:1},{label:"RelatedAttachments",value:2}],this.selectedTab={},this.Id=this.common.getRouteParam(this.route,"Id","num"),this.common.translateList(this.tabs),this.common.translateList(this.lstPermissions)}ngOnInit(){this.common.loadLkps(this.lstLkpKeys,this.lstLkps,this.fetchRelatedUserTypes.bind(this)),this.pageInit(),this.selectTab(this.tabs[0])}fetchRelatedUserTypes(){this.lstLkps.lstUserTypes&&(this.lstLkps.lstUserTypes=this.lstLkps.lstUserTypes.filter(t=>t.BelongToUser))}pageInit(){this.Id?this.ObjectDetails(this.Id):(this.model={userType:1,isActive:!0,_permissions:{}},this.common.fillUserBranDepart(this.model))}ObjectDetails(t){this.loading=!0,this.accountService.AccountDetails(t).subscribe(s=>{this.model=this.parseObjFromServer(s),this.loading=!1,this.calcAge()})}parseObjFromServer(t){return t.birthDate&&(t.birthDate=this.common.dateFormat(t.birthDate)),t.startDate&&(t.startDate=this.common.dateFormat(t.startDate)),t._permissions=t.permissions?JSON.parse(t.permissions):{},t.lstBranches&&(t._lstBranches=t.lstBranches.map(s=>s.branchId)),t.lstDepartments&&(t._lstDepartments=t.lstDepartments.map(s=>s.departmentId)),t}prepareObjToServer(t){return t._permissions&&(t.permissions=JSON.stringify(t._permissions)),t._lstBranches&&(t.lstBranches=t._lstBranches.map(s=>({branchId:s}))),t._lstDepartments&&(t.lstDepartments=t._lstDepartments.map(s=>({departmentId:s}))),t.nameEn||(t.nameEn=t.nameAr),t}save(){this.inputFailds={};let t=this.common.checkValidation(this.model,this.reqFields);if(!t.isValid)return this.inputFailds=t.failerFields,this.common.error("Fill required fields",""),!1;{let s=this.prepareObjToServer(this.model);this.common.info("Please wait!",""),this.saving=!0,this.accountService.AddAccount(s).subscribe({next:o=>{this.saving=!1,o.status?(this.common.success("Saved"),this.Id=o.entityId,this.isModal?this.closeDialog(this.Id):this.ObjectDetails(this.Id)):o.lstError.length>0&&this.common.error(o.lstError[0])},error:o=>(this.saving=!1,!1)})}return!0}back(){this.common.navigateTo("../accounts/users")}selectTab(t){this.selectedTab=t}addRow(t){this.model[t]||(this.model[t]=[]),this.model[t].push({})}removeRow(t,s){this.model[t]||(this.model[t]=[]),this.model[t].splice(s,1)}calculateBirthDate(){setTimeout(()=>{if(Number(this.model.age)){let t=this.common.calculateBirthDate(this.model.age);this.model.birthDate=this.common.dateFormat(t)}},10)}calcAge(){this.model.birthDate&&(this.model.age=this.common.calculateAge(this.model.birthDate))}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(h.B),e.Y36(x.j),e.Y36(_.gz),e.Y36(p.sK))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-users-cu"]],inputs:{closeDialog:"closeDialog",SetInitial:"SetInitial"},decls:9,vars:9,consts:[[1,"pt-1"],["class","flex justify-between items-center",4,"ngIf"],["class","flex mb-5 border-[#ebedf2] dark:border-[#191e3a] border-b overflow-y-auto whitespace-nowrap",4,"ngIf"],[1,"container",3,"ngClass"],[4,"ngIf"],["class","flex justify-end gap-x-1",4,"ngIf"],[1,"flex","justify-between","items-center"],[1,"font-semibold","dark:text-white-light","text-lg"],[1,"flex","space-x-2"],[1,"gap-2","cursor-pointer","btn","btn-secondary",3,"click"],[1,"gap-2","cursor-pointer","btn","btn-primary",3,"click"],["class","inline-block bg-white ltr:mr-4 rtl:ml-4 rounded-full w-3 h-3 animate-ping",4,"ngIf"],[1,"inline-block","bg-white","ltr:mr-4","rtl:ml-4","rounded-full","w-3","h-3","animate-ping"],[1,"flex","mb-5","border-[#ebedf2]","dark:border-[#191e3a]","border-b","overflow-y-auto","whitespace-nowrap"],["href","javascript:;","class","flex gap-2 p-4 hover:border-primary border-transparent border-b !outline-none hover:text-primary",3,"ngClass","click",4,"ngFor","ngForOf"],["tabsIcons",""],["href","javascript:;",1,"flex","gap-2","p-4","hover:border-primary","border-transparent","border-b","!outline-none","hover:text-primary",3,"ngClass","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-6","h-6"],[1,"mb-5",3,"ngClass"],["class","mb-5 font-bold text-lg",4,"ngIf"],[1,"flex","sm:flex-row","flex-col"],["class","ltr:sm:mr-4 mb-5 rtl:sm:ml-4 w-full sm:w-2/12",4,"ngIf"],[1,"flex-1","grid","grid-cols-1","sm:grid-cols-2",3,"ngClass"],["for","id"],["id","id","disabled","","type","text",1,"disabled:bg-[#eee]","dark:disabled:bg-[#1b2e4b]","form-input",3,"ngModel","ngModelChange"],[1,"flex","items-end"],[1,"inline-flex"],["type","checkbox",1,"form-checkbox",3,"ngModel","ngModelChange"],[3,"ngClass"],["for","Code"],["type","text",1,"form-input",3,"ngModel","ngModelChange"],["for","name"],["id","phn","type","text",1,"form-input",3,"ngModel","ngModelChange"],["bindLabel","label","bindValue","value",1,"form-control",3,"items","ngModel","ngModelChange"],["type","text",1,"form-input",3,"ngModel","ngModelChange","change"],["type","date",1,"form-input",3,"ngModel","ngModelChange"],[1,"form-group","local-forms"],["for","gender",1,"gen-label"],["bindLabel","label","bindValue","value",1,"form-control",3,"items","multiple","ngModel","ngModelChange"],[1,"bg-white","dark:bg-[#0e1726]","mb-5","p-4","border","border-[#ebedf2]","dark:border-[#191e3a]","rounded-md"],[1,"mb-5","font-bold","text-lg"],[1,"flex-1","gap-5","grid","grid-cols-1","sm:grid-cols-2"],["type","text","placeholder"," ",1,"form-input",3,"ngModel","ngModelChange"],[1,"ltr:sm:mr-4","mb-5","rtl:sm:ml-4","w-full","sm:w-2/12"],[3,"image","height","imageSelected"],["for","Email"],["id","Email","type","text","placeholder"," ",1,"form-input",3,"ngModel","ngModelChange"],["type","number","placeholder"," ",1,"form-input",3,"ngModel","ngModelChange"],["bindLabel","label","bindValue","value",1,"form-control",3,"items","clearable","ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["emptySpace",""],["type","text","autocomplete","off",1,"form-input",3,"ngModel","ngModelChange"],["type","password","autocomplete","off",1,"form-input",3,"ngModel","ngModelChange"],["class","panel",4,"ngIf"],[1,"panel"],[1,"mb-4","font-semibold","dark:text-white-light","text-lg"],[1,"gap-3","grid","grid-cols-3"],[4,"ngFor","ngForOf"],["type","checkbox",1,"peer","form-checkbox",3,"ngModel","ngModelChange"],[1,"peer-checked:text-primary"],[1,"bg-white","dark:bg-[#0e1726]","p-4","border","border-[#ebedf2]","dark:border-[#191e3a]","rounded-md"],[1,"flex","justify-end","mb-3"],[1,"gap-2","h-10","btn","btn-primary",3,"click"],[1,"mb-16"],[1,"table-hover"],[1,"text-center"],[1,"text-primary"],["type","button",3,"click"],[1,"flex","justify-end","gap-x-1"],["type","button",1,"btn-outline-danger","btn",3,"click"]],template:function(s,o){1&s&&(e.TgZ(0,"div")(1,"div",0),e.YNc(2,q,14,11,"div",1),e.YNc(3,D,4,1,"div",2),e.TgZ(4,"div",3),e.YNc(5,B,79,63,"div",4),e.YNc(6,$,27,20,"div",4),e.YNc(7,X,30,19,"div",4),e.qZA()()(),e.YNc(8,te,9,8,"div",5)),2&s&&(e.xp6(2),e.Q6J("ngIf",!o.isModal),e.xp6(1),e.Q6J("ngIf",!o.isModal),e.xp6(1),e.Q6J("ngClass",e.VKq(7,g,o.isModal?"px-2":"lg:px-16")),e.xp6(1),e.Q6J("ngIf",0==o.selectedTab.value),e.xp6(1),e.Q6J("ngIf",1==o.selectedTab.value),e.xp6(1),e.Q6J("ngIf",2==o.selectedTab.value),e.xp6(1),e.Q6J("ngIf",o.isModal))},dependencies:[d.mk,d.sg,d.O5,d.tP,c.Fj,c.wV,c.Wl,c.JJ,c.On,C._,f.P,v.J,Z.E,b.s,T.p,M.n,u.w9,A.Y,p.X$]})}return n})()}];let oe=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(ne),_.Bz]})}return n})();var se=a(9116),le=a(4868),ie=a(7368);let ae=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.ez,c.u5,oe,se.Q,le.tA,c.UX,p.aw,u.A0,ie.O]})}return n})()}}]);
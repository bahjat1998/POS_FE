"use strict";(self.webpackChunkvristo_angular=self.webpackChunkvristo_angular||[]).push([[139],{5139:(y,C,a)=>{a.r(C),a.d(C,{CompanyInfoModule:()=>F});var i=a(6895),u=a(3559),f=a(5861),e=a(4650),Z=a(3407),p=a(6467),v=a(2477),d=a(5603),c=a(4006),m=a(1835),g=a(4463);const A=function(r){return{"bg-primary text-white":r}};function T(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"li")(1,"a",15),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.selectTab(l))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&r){const t=_.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,A,o.selectedTab.value===t.value)),e.xp6(1),e.Oqu(e.lcZ(3,2,t.label))}}function x(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"tr",23)(1,"th",24),e._uU(2),e.qZA(),e.TgZ(3,"td",25)(4,"ng-select",5),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.branchId=n)}),e.qZA()(),e.TgZ(5,"td",25)(6,"ng-select",5),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.shiftType=n)}),e.qZA()(),e.TgZ(7,"td",25)(8,"ng-select",5),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.salesAccountId=n)}),e.qZA()(),e.TgZ(9,"td")(10,"div")(11,"input",26),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.serviceAmount=n)}),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"input",27),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.servicePercent=n)}),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"td")(16,"div")(17,"input",26),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.discountAmount=n)}),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"input",27),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.discountPercent=n)}),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"td",25)(22,"label",28)(23,"input",29),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.isFloorPos=n)}),e.qZA(),e.TgZ(24,"span",30),e._uU(25),e.ALo(26,"translate"),e.qZA()()(),e.TgZ(27,"td"),e._uU(28," LOGO "),e.qZA(),e.TgZ(29,"td",25)(30,"button",31),e.NdJ("click",function(){const l=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.deleteRow("lstBranchesSetup",l))}),e._UZ(31,"icon-trash-lines",32),e.qZA()()()}if(2&r){const t=_.$implicit,o=_.index,n=e.oxw(2);e.xp6(2),e.hij(" ",o+1," "),e.xp6(2),e.Q6J("items",n.lstLkps.Branch)("ngModel",t.branchId)("clearable",!1),e.xp6(2),e.Q6J("items",n.lstLkps.lstShiftType)("ngModel",t.shiftType)("clearable",!1),e.xp6(2),e.Q6J("items",n.lstLkps._Account_4)("ngModel",t.salesAccountId)("clearable",!1),e.xp6(3),e.s9C("placeholder",e.lcZ(12,20,"Fixed")),e.Q6J("ngModel",t.serviceAmount),e.xp6(2),e.s9C("placeholder",e.lcZ(14,22,"Percentage")),e.Q6J("ngModel",t.servicePercent),e.xp6(4),e.s9C("placeholder",e.lcZ(18,24,"Fixed")),e.Q6J("ngModel",t.discountAmount),e.xp6(2),e.s9C("placeholder",e.lcZ(20,26,"Percentage")),e.Q6J("ngModel",t.discountPercent),e.xp6(4),e.Q6J("ngModel",t.isFloorPos),e.xp6(2),e.Oqu(e.lcZ(26,28,"EnableFloors"))}}function M(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",16)(2,"a",17),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.newRow("lstBranchesSetup"))}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"table",18)(6,"thead",19)(7,"tr")(8,"th",20),e._uU(9," # "),e.qZA(),e.TgZ(10,"th",21),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",20),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th",20),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th",20),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th",20),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",20),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th",21),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"td"),e.qZA()(),e.TgZ(32,"tbody"),e.YNc(33,x,32,30,"tr",22),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,9,"New")),e.xp6(8),e.hij(" ",e.lcZ(12,11,"Branch")," "),e.xp6(3),e.hij(" ",e.lcZ(15,13,"ShiftType")," "),e.xp6(3),e.hij(" ",e.lcZ(18,15,"SalesAccount")," "),e.xp6(3),e.hij(" ",e.lcZ(21,17,"PosService")," "),e.xp6(3),e.hij(" ",e.lcZ(24,19,"PosDiscount")," "),e.xp6(3),e.hij(" ",e.lcZ(27,21,"FloorPos")," "),e.xp6(3),e.hij(" ",e.lcZ(30,23,"Logo")," "),e.xp6(4),e.Q6J("ngForOf",t.modal.lstBranchesSetup)}}const h=function(r){return{"is-invalid":r}},b=[{path:"",component:(()=>{class r{constructor(t,o,n,l){this.lookupsService=t,this.accountService=o,this.common=n,this.route=l,this.lang="labelEn",this.modal={},this.lstData=[],this.lstKeysRequiredOnInventoryLookups=[],this.lstInventoryLookupsByKey={},this.reqFields=["nameEn","nameAr"],this.inputFailds={},this.lstTabs=[{label:"CompanyBranches",value:0}],this.lstWords={AreYouSure:"",DeleteThisItem:"","?":""},this.lstLkpKeys=["Branch","lstShiftType","_Account_4","InvoiceCategories"],this.lstLkps={},this.selectedTab={}}ngOnInit(){this.loadLookups(),this.pageInit(),this.selectTab(this.lstTabs[0]),this.common.loadLkps(this.lstLkpKeys,this.lstLkps)}pageInit(){this.GetDetails()}GetDetails(){this.accountService.CompanyDetails().subscribe(t=>{this.modal=this.parseObjFromServer(t)})}loadLookups(){this.lstKeysRequiredOnInventoryLookups.forEach(t=>{this.lookupsService.Lookups(t).subscribe(o=>{this.lstInventoryLookupsByKey[t]=o})})}parseObjFromServer(t){return t?(t.lstDepartmentBranches&&(t._lstDepartmentBranches=t.lstDepartmentBranches.map(o=>o.branchId)),t.isActive=1==t.isActive?"true":"false",t._otherSetup=t.otherSetup?JSON.parse(t.otherSetup):{}):t={},t}prepareObjToServer(t){return t.isActive="true"==t.isActive,t._lstDepartmentBranches&&(t.lstDepartmentBranches=t._lstDepartmentBranches.map(o=>({branchId:o}))),t.otherSetup&&(t.otherSetup=JSON.stringify(t._otherSetup)),t}save(){let t=this.common.checkValidation(this.modal,this.reqFields);if(t.isValid){let o=this.prepareObjToServer(this.modal);this.accountService.AddCompany(o).subscribe({next:n=>{this.inputFailds={},n.status&&(this.common.success("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638"),this.GetDetails()),n.lstError.length>0&&this.common.error("Error",n.lstError[0])},error:n=>{this.common.error("Fill required fields","")}})}else this.inputFailds=t.failerFields,this.common.error("Fill required fields","")}back(){this.common.navigateTo("../system/departments")}deleteRow(t,o){var n=this;return(0,f.Z)(function*(){n.modal[t][o].id?(yield n.common.confirmationMessage(n.lstWords.AreYouSure,`${n.lstWords.DeleteThisItem} ${n.lstWords["?"]}`)).value&&n.executeDelete(t,o):n.executeDelete(t,o)})()}executeDelete(t,o){this.modal[t].splice(o,1)}newRow(t){this.modal[t]||(this.modal[t]=[]),this.modal[t].push({})}selectTab(t){this.selectedTab=t}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(Z.K),e.Y36(p.B),e.Y36(v.j),e.Y36(u.gz))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-company-info"]],decls:54,vars:56,consts:[[1,"space-y-4"],[1,"panel"],[1,"mb-4","font-semibold","dark:text-white-light","text-lg"],[1,"gap-3","grid","grid-cols-3"],["type","text",1,"form-input",3,"ngModel","ngClass","ngModelChange"],["bindLabel","label","bindValue","value",3,"items","ngModel","clearable","ngModelChange"],[1,"col-span-2"],[1,"form-label"],["rows","6",1,"form-input",3,"ngModel","ngModelChange"],[1,"flex","flex-wrap"],[4,"ngFor","ngForOf"],["class","panel",4,"ngIf"],[1,"flex","justify-end"],[1,"me-2","mt-1","btn","btn-danger",3,"click"],[1,"mt-1","btn","btn-success",3,"click"],["href","javascript:",1,"block","hover:bg-primary","ltr:mr-2","-mb-[1px]","rtl:ml-2","p-3.5","py-2","rounded","hover:text-white",3,"ngClass","click"],[1,"flex","justify-end","mb-2"],[1,"mt-1","btn","btn-primary",3,"click"],[1,"w-full","text-gray-500","dark:text-gray-400","text-sm","text-left","rtl:text-right"],[1,"text-gray-700","dark:text-gray-400","text-xs","uppercase"],[1,"bg-gray-50","dark:bg-gray-800","px-6","py-3"],[1,"px-6","py-3"],["class","border-gray-200 dark:border-gray-700 border-b",4,"ngFor","ngForOf"],[1,"border-gray-200","dark:border-gray-700","border-b"],[1,"f-col"],[1,"px-6","py-4"],["type","number",1,"block","mb-1","w-28","form-input",3,"placeholder","ngModel","ngModelChange"],["type","number",1,"w-28","form-input",3,"placeholder","ngModel","ngModelChange"],[1,"inline-flex"],["type","checkbox",1,"peer","form-checkbox",3,"ngModel","ngModelChange"],[1,"peer-checked:text-primary"],["type","button",1,"ml-auto","hover:text-danger",3,"click"],[1,"w-4.5","h-4.5"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"div")(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",4),e.NdJ("ngModelChange",function(s){return n.modal.nameEn=s}),e.qZA()(),e.TgZ(11,"div")(12,"label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"input",4),e.NdJ("ngModelChange",function(s){return n.modal.nameAr=s}),e.qZA()(),e._UZ(16,"div"),e.TgZ(17,"div")(18,"label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"input",4),e.NdJ("ngModelChange",function(s){return n.modal.phone1=s}),e.qZA()(),e.TgZ(22,"div")(23,"label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"input",4),e.NdJ("ngModelChange",function(s){return n.modal.phone2=s}),e.qZA()(),e.TgZ(27,"div")(28,"label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"input",4),e.NdJ("ngModelChange",function(s){return n.modal.email=s}),e.qZA()(),e.TgZ(32,"div")(33,"label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"ng-select",5),e.NdJ("ngModelChange",function(s){return n.modal.defaultInvoiceCategoryPosId=s}),e.qZA()(),e.TgZ(37,"div",6)(38,"label",7),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"textarea",8),e.NdJ("ngModelChange",function(s){return n.modal.desc=s}),e.qZA()()()(),e.TgZ(42,"div",1)(43,"ul",9),e.YNc(44,T,4,6,"li",10),e.qZA()(),e.YNc(45,M,34,25,"div",11),e.TgZ(46,"div",1)(47,"div",12)(48,"a",13),e.NdJ("click",function(){return n.back()}),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"a",14),e.NdJ("click",function(){return n.save()}),e._uU(52),e.ALo(53,"translate"),e.qZA()()()()),2&o&&(e.xp6(3),e.hij(" ",e.lcZ(4,26,"CompanyInfo"),""),e.xp6(5),e.Oqu(e.lcZ(9,28,"CompanyEnglishName")),e.xp6(2),e.Q6J("ngModel",n.modal.nameEn)("ngClass",e.VKq(46,h,n.inputFailds.nameEn)),e.xp6(3),e.Oqu(e.lcZ(14,30,"CompanyArabicName")),e.xp6(2),e.Q6J("ngModel",n.modal.nameAr)("ngClass",e.VKq(48,h,n.inputFailds.nameAr)),e.xp6(4),e.hij("",e.lcZ(20,32,"Phone"),"1"),e.xp6(2),e.Q6J("ngModel",n.modal.phone1)("ngClass",e.VKq(50,h,n.inputFailds.nameEn)),e.xp6(3),e.hij("",e.lcZ(25,34,"Phone"),"2"),e.xp6(2),e.Q6J("ngModel",n.modal.phone2)("ngClass",e.VKq(52,h,n.inputFailds.nameAr)),e.xp6(3),e.Oqu(e.lcZ(30,36,"Email")),e.xp6(2),e.Q6J("ngModel",n.modal.email)("ngClass",e.VKq(54,h,n.inputFailds.nameAr)),e.xp6(3),e.Oqu(e.lcZ(35,38,"DefaultInvoicePos")),e.xp6(2),e.Q6J("items",n.lstLkps.InvoiceCategories)("ngModel",n.modal.defaultInvoiceCategoryPosId)("clearable",!1),e.xp6(3),e.Oqu(e.lcZ(40,40,"Description")),e.xp6(2),e.Q6J("ngModel",n.modal.desc),e.xp6(3),e.Q6J("ngForOf",n.lstTabs),e.xp6(1),e.Q6J("ngIf",0==n.selectedTab.value),e.xp6(4),e.Oqu(e.lcZ(50,42,"Discard")),e.xp6(3),e.Oqu(e.lcZ(53,44,"Save")))},dependencies:[i.mk,i.sg,i.O5,d.p,c.Fj,c.wV,c.Wl,c.JJ,c.On,m.w9,g.X$]})}return r})()}];let I=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(b),u.Bz]})}return r})();var L=a(9116),k=a(4868),q=a(4180),J=a(9886);let F=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[i.ez,I,L.Q,c.u5,k.tA,c.UX,g.aw,q.$9,m.A0,J.zk]})}return r})()},5603:(y,C,a)=>{a.d(C,{p:()=>Z});var i=a(4650),u=a(6895);const f=["template"];function e(p,v){if(1&p&&(i.O4$(),i.TgZ(0,"svg",1),i._UZ(1,"path",2)(2,"path",3)(3,"path",4)(4,"path",5)(5,"path",6),i.qZA()),2&p){const d=i.oxw();i.Q6J("ngClass",d.class)}}let Z=(()=>{class p{constructor(d){this.viewContainerRef=d,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#e=this.\u0275fac=function(c){return new(c||p)(i.Y36(i.s_b))};static#t=this.\u0275cmp=i.Xpm({type:p,selectors:[["icon-trash-lines"]],viewQuery:function(c,m){if(1&c&&i.Gf(f,7),2&c){let g;i.iGM(g=i.CRH())&&(m.template=g.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["d","M20.5001 6H3.5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M18.8334 8.5L18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M9.5 11L10 16","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M14.5 11L14 16","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M6.5 6C6.55588 6 6.58382 6 6.60915 5.99936C7.43259 5.97849 8.15902 5.45491 8.43922 4.68032C8.44784 4.65649 8.45667 4.62999 8.47434 4.57697L8.57143 4.28571C8.65431 4.03708 8.69575 3.91276 8.75071 3.8072C8.97001 3.38607 9.37574 3.09364 9.84461 3.01877C9.96213 3 10.0932 3 10.3553 3H13.6447C13.9068 3 14.0379 3 14.1554 3.01877C14.6243 3.09364 15.03 3.38607 15.2493 3.8072C15.3043 3.91276 15.3457 4.03708 15.4286 4.28571L15.5257 4.57697C15.5433 4.62992 15.5522 4.65651 15.5608 4.68032C15.841 5.45491 16.5674 5.97849 17.3909 5.99936C17.4162 6 17.4441 6 17.5 6","stroke","currentColor","stroke-width","1.5"]],template:function(c,m){1&c&&i.YNc(0,e,6,1,"ng-template",null,0,i.W1O)},dependencies:[u.mk],encapsulation:2})}return p})()}}]);
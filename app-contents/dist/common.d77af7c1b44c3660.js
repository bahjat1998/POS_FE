"use strict";(self.webpackChunkvristo_angular=self.webpackChunkvristo_angular||[]).push([[592],{3222:(E,v,o)=>{o.d(v,{_:()=>Q});var t=o(4650),O=o(4609),A=o(2924),h=o(2477),C=o(6895),u=o(3538),x=o(1550),s=o(4463);const i=["PosSelectItemDetails"];function c(n,p){1&n&&(t.TgZ(0,"div",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"SelectDetails")))}const m=function(n){return{detail:n,type:0}};function f(n,p){if(1&n&&(t.ynx(0),t.GkF(1,11),t.BQk()),2&n){const e=p.$implicit;t.oxw(3);const a=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.VKq(2,m,e))}}function g(n,p){if(1&n&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",9),t.YNc(5,f,2,4,"ng-container",10),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"SelectVariant")),t.xp6(3),t.Q6J("ngForOf",e.componentData.lstVariants)}}const l=function(n){return{detail:n,type:1}};function r(n,p){if(1&n&&(t.ynx(0),t.GkF(1,11),t.BQk()),2&n){const e=p.$implicit;t.oxw(3);const a=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.VKq(2,l,e))}}const I=function(){return{padding:"p-3"}};function T(n,p){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",12)(5,"div",13),t.YNc(6,r,2,4,"ng-container",10),t.qZA(),t.TgZ(7,"div",14)(8,"app-calc",15),t.NdJ("bindVal",function(_){t.CHM(e);const d=t.oxw(2);return t.KtG(d.updateCalc(_))}),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"SelectAddOn")),t.xp6(4),t.Q6J("ngForOf",e.componentData.lstItemAddOns),t.xp6(2),t.Akn(t.DdM(7,I)),t.Q6J("ResetCounter",e.currentCounter)}}function y(n,p){if(1&n&&(t.TgZ(0,"div",7),t.YNc(1,g,6,4,"div",8),t.YNc(2,T,9,8,"div",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.componentData.lstVariants&&e.componentData.lstVariants.length>0),t.xp6(1),t.Q6J("ngIf",e.componentData.lstItemAddOns&&e.componentData.lstItemAddOns.length>0)}}function M(n,p){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const _=t.oxw();return t.KtG(_.closeSelectItemVariantAddOn())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",19),t.NdJ("click",function(){t.CHM(e);const _=t.oxw();return t.KtG(_.closeSelectItemVariantAddOn(1))}),t._uU(6),t.ALo(7,"translate"),t.qZA()()()}2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"Discard")),t.xp6(3),t.Oqu(t.lcZ(7,4,"Save")))}function D(n,p){if(1&n&&(t.TgZ(0,"div",25),t._UZ(1,"div",26),t.qZA()),2&n){const e=t.oxw().detail;t.xp6(1),t.Udp("background-image","url("+e.img+")")}}function P(n,p){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().detail;t.xp6(1),t.Oqu(e.name)}}function w(n,p){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().detail,a=t.oxw();t.xp6(1),t.Oqu("en"==a.common.currLang?e.nameEn:e.nameAr)}}function Z(n,p){if(1&n&&(t.ynx(0),t.TgZ(1,"p",27),t._uU(2),t.ALo(3,"number"),t.qZA(),t.BQk()),2&n){const e=t.oxw().detail;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.price)," ")}}function b(n,p){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).detail;t.xp6(1),t.AsE("",e.qty," X ",e.price,"")}}const L=function(n,p){return{"justify-between":n,"justify-end":p}};function V(n,p){if(1&n&&(t.ynx(0),t.TgZ(1,"div",28),t.YNc(2,b,2,2,"span",8),t.TgZ(3,"span",27),t._uU(4),t.ALo(5,"number"),t.qZA()(),t.BQk()),2&n){const e=t.oxw().detail;let a;t.xp6(1),t.Q6J("ngClass",t.WLB(5,L,e.qty,!e.qty)),t.xp6(1),t.Q6J("ngIf",e.qty),t.xp6(2),t.hij(" ",t.lcZ(5,3,null!==(a=e.total)&&void 0!==a?a:e.price)," ")}}const B=function(n){return{selected:n}},S=function(n){return{grow:n}};function R(n,p){if(1&n){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){const _=t.CHM(e),d=_.type,N=_.detail,U=t.oxw();return t.KtG(U.selectBox(d,N))}),t.TgZ(1,"div",21),t.YNc(2,D,2,2,"div",22),t.TgZ(3,"p",23),t.YNc(4,P,2,1,"ng-container",8),t.YNc(5,w,2,1,"ng-container",8),t.qZA(),t.TgZ(6,"div",24),t.YNc(7,Z,4,3,"ng-container",8),t.YNc(8,V,6,8,"ng-container",8),t.qZA()()()}if(2&n){const e=p.detail,a=p.type;t.Q6J("ngClass",t.VKq(8,B,e.selected)),t.xp6(2),t.Q6J("ngIf",e.img),t.xp6(1),t.Q6J("ngClass",t.VKq(10,S,!e.img)),t.xp6(1),t.Q6J("ngIf",0==a),t.xp6(1),t.Q6J("ngIf",1==a),t.xp6(1),t.Q6J("ngClass",t.VKq(12,S,!e.img)),t.xp6(1),t.Q6J("ngIf",0==a),t.xp6(1),t.Q6J("ngIf",1==a)}}let Q=(()=>{class n{constructor(e,a,_){this.gto=e,this.managementService=a,this.common=_,this.options={},this.lstLkpKeys=["lstPredefinedCurrenciesValues"],this.lstLkps={},this.inputValue="",this.lastSelectedAddOn={},this.currentCounter=0,this.common.loadLkps(this.lstLkpKeys,this.lstLkps),e.openPosSelectItemDetails$.subscribe(d=>{this.componentData=JSON.parse(JSON.stringify(d)),console.log(d),this.openPosSelectItemDetails()})}openPosSelectItemDetails(){this.PosSelectItemDetails?.open()}closeSelectItemVariantAddOn(e=""){e&&this.gto.closePosSelectItemDetails$.next(this.buildObjectFromSelection()),this.PosSelectItemDetails?.close()}buildObjectFromSelection(){let e={...this.componentData};e.name||(e.name="en"==this.common.currLang?this.componentData.nameEn:this.componentData.nameAr),e.price=e.price;let a=this.componentData.lstVariants.find(d=>d.selected);a&&(e.variantId=a.id,e.variantName=a.name,e.variantPrice=a.price,a.asTotalPrice?e.price=e.variantPrice:e.price+=e.variantPrice,a.repalceCurrentItemName&&(e.name=e.variantName));let _=this.componentData.lstItemAddOns.filter(d=>d.selected);return _&&(e.lstAddOns=_.map(d=>(e.price+=d.qty*d.price,{addOnId:d.addOnId,addOnName:"en"==this.common.currLang?d.nameEn:d.nameAr,qty:d.qty,price:d.price,total:d.qty*d.price}))),e.total=1*e.price,e}handleCustomAction(e){}selectBox(e,a){0==e?(this.componentData.lstVariants.forEach(_=>_!=a?_.selected=!1:""),a.selected=!a.selected):1==e&&(a.selected?(a.selected=!1,a.qty=0):a.selected||(a.selected=!0,this.lastSelectedAddOn=a,a.qty||(a.qty=1,a.total=a.qty*a.price)))}updateCalc(e){if(this.currentCounter=e,console.log(e),this.lastSelectedAddOn){let a=(e+"")[(e+"").length-1];this.lastSelectedAddOn.qty=Number(a)?a:1}}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(O.L),t.Y36(A.i),t.Y36(h.j))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-item-variant-add-on"]],viewQuery:function(a,_){if(1&a&&t.Gf(i,7),2&a){let d;t.iGM(d=t.CRH())&&(_.PosSelectItemDetails=d.first)}},decls:10,vars:0,consts:[[1,"modal-top","rounded","extra-large-modal","lg"],["PosSelectItemDetails",""],["modalHeader",""],["modalBody",""],["modalFooter",""],["SelectBox",""],[1,"!py-2","title"],[1,"space-y-2","pb-1"],[4,"ngIf"],[1,"gap-3","grid","grid-cols-5"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"gap-3","grid","grid-cols-6"],[1,"gap-3","grid","grid-cols-3","col-span-4"],[1,"col-span-2"],[3,"ResetCounter","bindVal"],[1,"flex","justify-end","w-full"],[1,"flex","justify-end"],["type","button",1,"btn-outline-danger","btn",3,"click"],["type","button",1,"rtl:mr-4","ltr:ml-4","btn","btn-primary",3,"click"],[1,"flex","flex-col","flex-1","rounded-lg","w-full","md:min-h-[155px]","md:max-h-[155px]","bx-1",3,"ngClass","click"],[1,"flex","flex-col","w-full","grow"],["class","grow",4,"ngIf"],[1,"flex","justify-center","items-end",3,"ngClass"],[1,"flex","justify-end","items-end",3,"ngClass"],[1,"grow"],[1,"mg"],[1,"pri"],[1,"flex","w-full",3,"ngClass"]],template:function(a,_){1&a&&(t.TgZ(0,"modal",0,1),t.YNc(2,c,3,3,"ng-template",null,2,t.W1O),t.YNc(4,y,3,2,"ng-template",null,3,t.W1O),t.YNc(6,M,8,6,"ng-template",null,4,t.W1O),t.qZA(),t.YNc(8,R,9,14,"ng-template",null,5,t.W1O))},dependencies:[C.mk,C.sg,C.O5,C.tP,u.z,x.F,C.JJ,s.X$],styles:[".bx-1[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px 5px 10px;color:rgb(67 97 238 / var(--tw-text-opacity));border-color:#4361ee;border-width:1px;.mg {min-width: 85px; height: 90px} .mg {border-radius: .25rem} .mg {background-size: cover} .mg {background-position: center} .pri {font-size: 18px; color: black; font-weight: bold;}}.bx-1[_ngcontent-%COMP%]:hover{cursor:pointer}.bx-1.selected[_ngcontent-%COMP%]{color:#fff;background-color:#4361ee;.pri {color: white;}}"]})}return n})()},7679:(E,v,o)=>{o.d(v,{b:()=>l});var t=o(6895),O=o(3559),A=o(3222),h=o(4650);const C=[{path:"",component:A._}];let u=(()=>{class r{static#t=this.\u0275fac=function(y){return new(y||r)};static#e=this.\u0275mod=h.oAB({type:r});static#n=this.\u0275inj=h.cJS({imports:[O.Bz.forChild(C),O.Bz]})}return r})();var x=o(4463),s=o(4006),i=o(4868),c=o(9116),m=o(3538),f=o(3826),g=o(4007);let l=(()=>{class r{static#t=this.\u0275fac=function(y){return new(y||r)};static#e=this.\u0275mod=h.oAB({type:r});static#n=this.\u0275inj=h.cJS({imports:[t.ez,u,c.Q,s.u5,i.tA,s.UX,x.aw,m.y,f.n,g.d]})}return r})()},1030:(E,v,o)=>{o.d(v,{h:()=>x});var t=o(4650),O=o(6895);const A=["template"];function h(s,i){if(1&s&&(t.O4$(),t.TgZ(0,"svg",3),t._UZ(1,"path",4)(2,"path",5),t.qZA()),2&s){const c=t.oxw(2);t.Q6J("ngClass",c.class)}}function C(s,i){if(1&s&&(t.O4$(),t.TgZ(0,"svg",6),t._UZ(1,"path",7)(2,"path",8),t.qZA()),2&s){const c=t.oxw(2);t.Q6J("ngClass",c.class)}}function u(s,i){if(1&s&&(t.YNc(0,h,3,1,"svg",1),t.YNc(1,C,3,1,"svg",2)),2&s){const c=t.oxw();t.Q6J("ngIf",!c.fill),t.xp6(1),t.Q6J("ngIf",c.fill)}}let x=(()=>{class s{constructor(c){this.viewContainerRef=c,this.fill=!1,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(m){return new(m||s)(t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["icon-mail"]],viewQuery:function(m,f){if(1&m&&t.Gf(A,7),2&m){let g;t.iGM(g=t.CRH())&&(f.template=g.first)}},inputs:{fill:"fill",class:"class"},decls:2,vars:0,consts:[["template",""],["width","18","height","18","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass",4,"ngIf"],["width","18","height","18","viewBox","0 0 18 18","fill","none",3,"ngClass",4,"ngIf"],["width","18","height","18","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["opacity","0.5","d","M2 12C2 8.22876 2 6.34315 3.17157 5.17157C4.34315 4 6.22876 4 10 4H14C17.7712 4 19.6569 4 20.8284 5.17157C22 6.34315 22 8.22876 22 12C22 15.7712 22 17.6569 20.8284 18.8284C19.6569 20 17.7712 20 14 20H10C6.22876 20 4.34315 20 3.17157 18.8284C2 17.6569 2 15.7712 2 12Z","stroke","currentColor","stroke-width","1.5"],["d","M6 8L8.1589 9.79908C9.99553 11.3296 10.9139 12.0949 12 12.0949C13.0861 12.0949 14.0045 11.3296 15.8411 9.79908L18 8","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["width","18","height","18","viewBox","0 0 18 18","fill","none",3,"ngClass"],["opacity","0.5","d","M10.65 2.25H7.35C4.23873 2.25 2.6831 2.25 1.71655 3.23851C0.75 4.22703 0.75 5.81802 0.75 9C0.75 12.182 0.75 13.773 1.71655 14.7615C2.6831 15.75 4.23873 15.75 7.35 15.75H10.65C13.7613 15.75 15.3169 15.75 16.2835 14.7615C17.25 13.773 17.25 12.182 17.25 9C17.25 5.81802 17.25 4.22703 16.2835 3.23851C15.3169 2.25 13.7613 2.25 10.65 2.25Z","fill","currentColor"],["d","M14.3465 6.02574C14.609 5.80698 14.6445 5.41681 14.4257 5.15429C14.207 4.89177 13.8168 4.8563 13.5543 5.07507L11.7732 6.55931C11.0035 7.20072 10.4691 7.6446 10.018 7.93476C9.58125 8.21564 9.28509 8.30993 9.00041 8.30993C8.71572 8.30993 8.41956 8.21564 7.98284 7.93476C7.53168 7.6446 6.9973 7.20072 6.22761 6.55931L4.44652 5.07507C4.184 4.8563 3.79384 4.89177 3.57507 5.15429C3.3563 5.41681 3.39177 5.80698 3.65429 6.02574L5.4664 7.53583C6.19764 8.14522 6.79033 8.63914 7.31343 8.97558C7.85834 9.32604 8.38902 9.54743 9.00041 9.54743C9.6118 9.54743 10.1425 9.32604 10.6874 8.97558C11.2105 8.63914 11.8032 8.14522 12.5344 7.53582L14.3465 6.02574Z","fill","currentColor"]],template:function(m,f){1&m&&t.YNc(0,u,2,2,"ng-template",null,0,t.W1O)},dependencies:[O.mk,O.O5],encapsulation:2})}return s})()},7337:(E,v,o)=>{o.d(v,{Z:()=>C});var t=o(4650),O=o(6895);const A=["template"];function h(u,x){if(1&u&&(t.O4$(),t.TgZ(0,"svg",1),t._UZ(1,"circle",2)(2,"path",3),t.qZA()),2&u){const s=t.oxw();t.Q6J("ngClass",s.class)}}let C=(()=>{class u{constructor(s){this.viewContainerRef=s,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(i){return new(i||u)(t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["icon-search"]],viewQuery:function(i,c){if(1&i&&t.Gf(A,7),2&i){let m;t.iGM(m=t.CRH())&&(c.template=m.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["cx","11.5","cy","11.5","r","9.5","stroke","currentColor","stroke-width","1.5","opacity","0.5"],["d","M18.5 18.5L22 22","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"]],template:function(i,c){1&i&&t.YNc(0,h,3,1,"ng-template",null,0,t.W1O)},dependencies:[O.mk],encapsulation:2})}return u})()},9974:(E,v,o)=>{o.d(v,{S:()=>u});var t=o(4641),A=o(8493),h=o(2773),C=o(4650);t.vfs=A.I.vfs;let u=(()=>{class x{printDoc(i){localStorage.getItem("PDFSetup")||alert("Please setup PDF first from company info!");let c=JSON.parse(localStorage.getItem("PDFSetup")??"{}"),g={pageMargins:JSON.parse(c.pdfMargins),content:i,background:()=>({image:c.pdfLetter,fit:[595,839]}),footer:(l,r)=>[{absolutePosition:{x:18,y:30},text:"THIS IS A SYSTEM GENERATED REPORT AND DOES NOT REQUIRE PHYSICAL SIGNATURE",fontSize:8},{absolutePosition:{x:530,y:140},text:`Page ${l} of ${r}`,fontSize:9}],Times:{normal:"Times-Roman",bold:"Times-Bold",italics:"Times-Italic",bolditalics:"Times-BoldItalic"},styles:{tableHeader:{fontSize:14,bold:!0,color:"white",fillColor:"#00A9CE"},tableCell:{fontSize:12,color:"#000"}},defaultStyle:{font:"g_Font"}};t.createPdf(g,{},{g_Font:{normal:"fontTajawalMedium",bold:"fontTajawalMedium",italics:"fontTajawalMedium",bolditalics:"fontTajawalMedium"}},{fontTajawalMedium:h.X}).open()}tableDesign1(i,c){let m=[],f=[],g=[];return i.forEach(l=>{g.push({text:l.title??"",style:"tableHeader"}),f.push(l.pdfWidth??"*")}),m.push(g),c.forEach((l,r)=>{let I=[];i.forEach(T=>{if(T.widgets)I.push(l[T.prop]);else{let y=l[T.prop]??"";"i"==T.prop&&(y=r+1+""),I.push({text:y,style:"tableCell"})}}),m.push(I)}),[{table:{headerRows:1,widths:f,body:m},layout:{hLineWidth:function(l,r){return 0==l||1==l||l===r.table.body.length?0:1},vLineWidth:function(l){return 0},hLineColor:function(l){return 0!=l?"#00A9CE":""},paddingTop:function(l,r){return 5},paddingBottom:function(l,r){return 5},fillColor:function(l,r,I){return 0===l?"#00A9CE":null},textColor:function(l,r,I){return 0===l?"white":"black"}}}]}arabicFormat(i){if(i){var f=i=String(i);if([" ","\u2022",")",":","(","-","_","/","\u2019",",","!","@","#","$","%","\\",".","<",">","'","\n","%"," "].forEach(g=>{f=f.split(g).join("")}),!/^[A-Za-z0-9]*$/.test(f)){let g=i.split(" ").reverse(),l=[];g.forEach((r,I)=>{l.push(1==I?r+" ":r)}),i=l.join(" ")}}return i}static#t=this.\u0275fac=function(c){return new(c||x)};static#e=this.\u0275prov=C.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}return x})()}}]);
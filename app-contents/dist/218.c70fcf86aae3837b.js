"use strict";(self.webpackChunkvristo_angular=self.webpackChunkvristo_angular||[]).push([[218],{1258:(St,nt,m)=>{m.d(nt,{e:()=>at});var t=m(4650),Y=m(4609),U=m(798),j=m(2924),G=m(2477),S=m(6895);const w=["template"];function A(b,l){if(1&b&&(t.O4$(),t.TgZ(0,"svg",1),t._UZ(1,"path",2),t.qZA()),2&b){const d=t.oxw();t.Q6J("ngClass",d.class)}}let E=(()=>{class b{constructor(d){this.viewContainerRef=d,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(u){return new(u||b)(t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["icon-arrow-left"]],viewQuery:function(u,g){if(1&u&&t.Gf(w,7),2&u){let v;t.iGM(v=t.CRH())&&(g.template=v.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["d","M4 12H20M20 12L14 6M20 12L14 18","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"]],template:function(u,g){1&u&&t.YNc(0,A,2,1,"ng-template",null,0,t.W1O)},dependencies:[S.mk],encapsulation:2})}return b})();var M=m(3538),X=m(901),ct=m(4463);const $=["PosMoveOrderItemsPopup"],rt=["leftContainer"],st=["rightContainer"];function ot(b,l){if(1&b){const d=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"button",23),t.NdJ("click",function(){t.CHM(d);const g=t.oxw(2);return t.KtG(g.move("ltr"))}),t._UZ(3,"icon-arrow-left",24),t.qZA(),t.TgZ(4,"button",23),t.NdJ("click",function(){t.CHM(d);const g=t.oxw(2);return t.KtG(g.move("rtl"))}),t._UZ(5,"icon-arrow-left",25),t.qZA()()()}}const W=function(b){return{invoice:b}};function ft(b,l){if(1&b){const d=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"button",8),t.NdJ("click",function(){t.CHM(d);const g=t.oxw();return t.KtG(g.selectMapper(0))}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",8),t.NdJ("click",function(){t.CHM(d);const g=t.oxw();return t.KtG(g.selectMapper(1))}),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"button",8),t.NdJ("click",function(){t.CHM(d);const g=t.oxw();return t.KtG(g.enableMultiple())}),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"ul",13)(16,"div",14,15),t.GkF(18,16),t.qZA()(),t.GkF(19,16),t.qZA(),t.YNc(20,ot,6,0,"div",17),t.qZA(),t.TgZ(21,"div",18)(22,"ul",19)(23,"div",14,20),t.GkF(25,16),t.qZA()(),t.GkF(26,16),t.qZA()()()}if(2&b){const d=t.oxw(),u=t.MAs(7),g=t.MAs(9);t.xp6(2),t.Q6J("ngClass",0==d.mapper?"btn-primary":"btn-outline-primary"),t.xp6(1),t.Oqu(t.lcZ(4,22,"PerItem")),t.xp6(2),t.Q6J("ngClass",1==d.mapper?"btn-secondary":"btn-outline-secondary"),t.xp6(1),t.Oqu(t.lcZ(7,24,"PerQuantity")),t.xp6(2),t.Q6J("ngClass",d.options.enableMultiple?"btn-dark":"btn-outline-dark"),t.xp6(1),t.Oqu(t.lcZ(10,26,"EnableMultiple")),t.xp6(3),t.Q6J("ngClass",d.options.enableMultiple?"":"gap-x-12"),t.xp6(2),t.Q6J("ngClass",d.options.enableMultiple?"pr-2":""),t.xp6(2),t.Q6J("sortablejs",d.fromOrder.lstItems)("sortablejsOptions",d.leftOptions),t.xp6(2),t.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",t.VKq(28,W,d.fromOrder)),t.xp6(1),t.Q6J("ngTemplateOutlet",g)("ngTemplateOutletContext",t.VKq(30,W,d.fromOrder)),t.xp6(1),t.Q6J("ngIf",d.options.enableMultiple),t.xp6(1),t.Q6J("ngClass",d.options.enableMultiple?"pl-2":""),t.xp6(2),t.Q6J("sortablejs",d.toOrder.lstItems)("sortablejsOptions",d.rightOptions),t.xp6(2),t.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",t.VKq(32,W,d.toOrder)),t.xp6(1),t.Q6J("ngTemplateOutlet",g)("ngTemplateOutletContext",t.VKq(34,W,d.toOrder))}}function Mt(b,l){if(1&b){const d=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(d);const g=t.oxw(2);return t.KtG(g.closePosMoveOrderItemsPopup("PAY"))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&b&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Pay")))}function Et(b,l){if(1&b){const d=t.EpF();t.TgZ(0,"div",26),t._UZ(1,"div"),t.TgZ(2,"div",27)(3,"button",28),t.NdJ("click",function(){t.CHM(d);const g=t.oxw();return t.KtG(g.closePosMoveOrderItemsPopup())}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,Mt,3,3,"button",29),t.qZA()()}if(2&b){const d=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,2,"Discard")),t.xp6(2),t.Q6J("ngIf",d.componentData.buttons.PAY)}}function Tt(b,l){if(1&b&&(t.TgZ(0,"span",43),t._uU(1),t.qZA()),2&b){const d=t.oxw().$implicit;t.xp6(1),t.Oqu(d.variantName)}}function Lt(b,l){if(1&b&&(t.TgZ(0,"span",46),t._uU(1),t.qZA()),2&b){const d=t.oxw().$implicit;t.xp6(1),t.AsE("",d.addOnName," X ",d.qty,"")}}function B(b,l){if(1&b&&(t.ynx(0),t.YNc(1,Lt,2,2,"span",45),t.BQk()),2&b){const d=l.$implicit;t.xp6(1),t.Q6J("ngIf",d)}}function x(b,l){if(1&b&&(t.ynx(0),t.YNc(1,B,2,1,"ng-container",44),t.BQk()),2&b){const d=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",d.lstAddOns)}}const f=function(b,l){return{"bg-primary-light":b,"bg-white":l}};function Q(b,l){if(1&b){const d=t.EpF();t.TgZ(0,"li",32)(1,"div",33),t.NdJ("click",function(){const v=t.CHM(d).$implicit,C=t.oxw(2);return t.KtG(C.selectItm(v))}),t.TgZ(2,"div",34)(3,"div",35)(4,"div",36),t._uU(5),t.TgZ(6,"span",37),t._uU(7),t.ALo(8,"number"),t.ALo(9,"number"),t.qZA()(),t.TgZ(10,"div",38),t.YNc(11,Tt,2,1,"span",39),t.YNc(12,x,2,1,"ng-container",40),t.qZA()(),t.TgZ(13,"div",41)(14,"span",42),t._uU(15),t.qZA()()()()()}if(2&b){const d=l.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(11,f,d.selected,!d.selected)),t.xp6(4),t.Oqu(d.name),t.xp6(2),t.AsE(" (",t.lcZ(8,7,d.quantity)," X ",t.lcZ(9,9,d.price),")"),t.xp6(4),t.Q6J("ngIf",d.variantName),t.xp6(1),t.Q6J("ngIf",d.lstAddOns),t.xp6(3),t.Oqu(d.total)}}function V(b,l){1&b&&t.YNc(0,Q,16,14,"li",31),2&b&&t.Q6J("ngForOf",l.invoice.lstItems)}function F(b,l){if(1&b&&(t.TgZ(0,"div",22)(1,"div",47)(2,"p",48),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",49)(6,"span",50),t._uU(7),t.qZA()()(),t._UZ(8,"hr"),t.TgZ(9,"div",47)(10,"p",48),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",49)(14,"span",50),t._uU(15),t.ALo(16,"number"),t.qZA()()(),t.TgZ(17,"div",47)(18,"p",48),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",49)(22,"span",51),t._uU(23),t.ALo(24,"number"),t.qZA(),t.TgZ(25,"span",50),t._uU(26),t.ALo(27,"number"),t.qZA()()(),t.TgZ(28,"div",47)(29,"p",48),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",49)(33,"span",51),t._uU(34),t.ALo(35,"number"),t.qZA(),t.TgZ(36,"span",50),t._uU(37),t.ALo(38,"number"),t.qZA()()(),t.TgZ(39,"div",47)(40,"p",48),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",49)(44,"span",50),t._uU(45),t.ALo(46,"number"),t.qZA()()()()),2&b){const d=l.invoice;t.xp6(3),t.hij("",t.lcZ(4,12,"TotalItems")," : "),t.xp6(4),t.Oqu(d.totQty),t.xp6(4),t.hij("",t.lcZ(12,14,"Total")," : "),t.xp6(4),t.Oqu(t.lcZ(16,16,d.totalBeforeDiscount)),t.xp6(4),t.hij("",t.lcZ(20,18,"Discount")," : "),t.xp6(4),t.hij("",t.lcZ(24,20,d.discPer),"%"),t.xp6(3),t.Oqu(t.lcZ(27,22,d.discAmount)),t.xp6(4),t.hij("",t.lcZ(31,24,"Service")," : "),t.xp6(4),t.hij("",t.lcZ(35,26,d.serPer),"%"),t.xp6(3),t.Oqu(t.lcZ(38,28,d.serAmount)),t.xp6(4),t.hij("",t.lcZ(42,30,"FinalTotal")," : "),t.xp6(4),t.Oqu(t.lcZ(46,32,d.finalTotal))}}let at=(()=>{class b{constructor(d,u,g,v){this.gto=d,this.invoiceHelperService=u,this.managementService=g,this.common=v,this.options={},this.actionPosMoveOrderItems=(C="",k="")=>{this.PosMoveOrderItemsPopup?.close(),this.gto.closePosMoveOrderItems$.next({action:C,order:k})},this.lstLkpKeys=[],this.lstLkps={},this.mapper=0,this.items=[{id:1,text:"Need to be approved",name:"Kelly Young"},{id:2,text:"Meeting with client",name:"Andy King"},{id:3,text:"Project Detail",name:"Judy Holmes"},{id:4,text:"Edited Post Apporval",name:"Vincent Carpenter"},{id:5,text:"Project Lead Pickup",name:"Mary McDonald"}],this.leftOptions={group:"icon",animation:150,sort:!1,onAdd:C=>this.onAddToList(this.fromOrder,this.toOrder,C),onRemove:C=>this.onRemoveToList(this.fromOrder,C),onChoose:C=>{const z=this.leftEl?.nativeElement&&C.from===this.leftEl.nativeElement?this.fromOrder.lstItems:this.toOrder.lstItems;C.item.__draggedMeta__={sourceArray:z,sourceIndex:C.oldIndex,itemRef:z[C.oldIndex]}}},this.rightOptions={group:"icon",animation:150,sort:!1,onAdd:C=>this.onAddToList(this.toOrder,this.fromOrder,C),onRemove:C=>this.onRemoveToList(this.toOrder,C),onChoose:C=>{const z=this.leftEl?.nativeElement&&C.from===this.leftEl.nativeElement?this.fromOrder.lstItems:this.toOrder.lstItems;C.item.__draggedMeta__={sourceArray:z,sourceIndex:C.oldIndex,itemRef:z[C.oldIndex]}}},this.common.loadLkps(this.lstLkpKeys,this.lstLkps),d.openPosMoveOrderItems$.subscribe(C=>{this.componentData=C,this.componentData.fromOrderId?this.GetOrderDetails(this.componentData.fromOrderId,"fromOrder"):this.fromOrder=this.componentData.fromOrder,this.componentData.toOrderId?this.GetOrderDetails(this.componentData.toOrderId,"toOrder"):this.toOrder=this.componentData.toOrder,this.openPosMoveOrderItems()})}enableMultiple(){this.options.enableMultiple=!this.options.enableMultiple}GetOrderDetails(d,u){this.managementService.OrderDetails({id:d}).subscribe(v=>{u&&(this[u]=v)})}openPosMoveOrderItems(){this.PosMoveOrderItemsPopup?.open()}closePosMoveOrderItemsPopup(d=""){this.componentData.fromOrder&&this.componentData.fromOrder.lstItems&&0!=this.componentData.fromOrder.lstItems.length?this.componentData.toOrder&&this.componentData.toOrder.lstItems&&0!=this.componentData.toOrder.lstItems.length?this.componentData.fromOrder.id?(this.gto.closePosMoveOrderItems$.next({action:d,fromOrder:this.componentData.fromOrder,toOrder:this.componentData.toOrder}),this.PosMoveOrderItemsPopup?.close()):this.common.error("Source Order Can't Be Not Saved",""):this.common.error("Target Order Can't Be Empty",""):this.common.error("Source Order Can't Be Empty","")}ngOnInit(){}selectMapper(d){this.mapper=d}navTo(d){}logg(){console.log(this.fromOrder,this.toOrder)}onAddToList(d,u,g){const v=g.item.__draggedMeta__;if(!v)return;const{itemRef:C,sourceIndex:z}=v;if(1===this.mapper){const Z={...C,quantity:1};d.lstItems.splice(g.newIndex,0,Z),d.lstItems=d.lstItems.filter(Ct=>Ct!=C),d.lstItems=this.mergeMatchedItems(d.lstItems),setTimeout(()=>{C.quantity-=1,0===C.quantity||u.lstItems.splice(z,0,C),u.lstItems=this.mergeMatchedItems(u.lstItems),this.refreshInvoicesCalculations()},1)}else setTimeout(()=>{d.lstItems=this.mergeMatchedItems(d.lstItems),u.lstItems=this.mergeMatchedItems(u.lstItems),this.refreshInvoicesCalculations()},10)}refreshInvoicesCalculations(){console.log(this.fromOrder,this.toOrder),setTimeout(()=>{this.invoiceHelperService.refreshItemPrices(this.fromOrder),this.invoiceHelperService.refreshItemPrices(this.toOrder),this.refreshInvoiceTotalQty(this.fromOrder),this.refreshInvoiceTotalQty(this.toOrder)},80)}mergeMatchedItems(d){const u=new Map;for(const g of d){const v=g.lstAddOns?[...g.lstAddOns].sort().join(","):"",z=`${g.name}__${g.variant??""}__${v}`;u.has(z)?u.get(z).quantity+=g.quantity:u.set(z,{...g})}return Array.from(u.values())}onRemoveToList(d,u){if(1===this.mapper)return;const g=u.item.__draggedItemRef,v=d.lstItems.findIndex(C=>C===g);-1!==v&&d.lstItems.splice(v,1)}selectItm(d){this.options.enableMultiple&&(d.selected=!d.selected)}move(d){let u=(k,z,Z)=>{let Ct=k.lstItems[Z];if(1===this.mapper){const Se={...Ct,quantity:1};z.lstItems.splice(0,0,Se),z.lstItems=this.mergeMatchedItems(z.lstItems),setTimeout(()=>{Ct.quantity-=1,0===Ct.quantity?k.lstItems.splice(Z,1):k.lstItems[Z].quantity=Ct.quantity,k.lstItems=this.mergeMatchedItems(k.lstItems)},1)}else z.lstItems.splice(0,0,Ct),k.lstItems.splice(Z,1)},g={},v={};"ltr"==d?(g=this.fromOrder,v=this.toOrder):"rtl"==d&&(g=this.toOrder,v=this.fromOrder);let C=g.lstItems.filter(k=>k.selected);C.reverse(),C.forEach((k,z)=>{if(k.selected){let Z=g.lstItems.findIndex(Ct=>Ct==k);u(g,v,Z)}}),v.lstItems.forEach(k=>k.selected=!1),g.lstItems.forEach(k=>k.selected=!1),this.refreshInvoicesCalculations()}refreshInvoiceTotalQty(d){d.totQty=this.common.sum(d.lstItems,"quantity")}static#t=this.\u0275fac=function(u){return new(u||b)(t.Y36(Y.L),t.Y36(U.w),t.Y36(j.i),t.Y36(G.j))};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["app-move-order-items"]],viewQuery:function(u,g){if(1&u&&(t.Gf($,7),t.Gf(rt,5),t.Gf(st,5)),2&u){let v;t.iGM(v=t.CRH())&&(g.PosMoveOrderItemsPopup=v.first),t.iGM(v=t.CRH())&&(g.leftEl=v.first),t.iGM(v=t.CRH())&&(g.rightEl=v.first)}},decls:10,vars:0,consts:[[1,"modal-top","rounded","extra-large-modal","lg","no-select"],["PosMoveOrderItemsPopup",""],["modalBody",""],["modalFooter",""],["ItemsList",""],["TotalsWidget",""],[1,"flex","justify-between","pr-7"],[1,"flex","gap-x-3"],["type","button",1,"btn",3,"ngClass","click"],[1,"py-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","icon-change",3,"ngClass"],[1,"flex"],[1,"flex-1",3,"ngClass"],[1,"left"],[1,"icsd",3,"sortablejs","sortablejsOptions"],["leftContainer",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","flex justify-center items-center w-12",4,"ngIf"],[3,"ngClass"],[1,"right"],["rightContainer",""],[1,"flex","justify-center","items-center","w-12"],[1,"space-y-2"],["type","button",1,"btn","btn-info","btn-sm",3,"click"],[1,"w-6","h-6"],[1,"w-6","h-6","-rotate-180"],[1,"flex","justify-between","w-full"],[1,"flex","justify-end"],["type","button",1,"btn-outline-danger","btn",3,"click"],["type","button","class","rtl:mr-4 ltr:ml-4 btn btn-success",3,"click",4,"ngIf"],["type","button",1,"rtl:mr-4","ltr:ml-4","btn","btn-success",3,"click"],["class","mb-2 cursor-grab",4,"ngFor","ngForOf"],[1,"mb-2","cursor-grab"],[1,"flex","md:flex-row","flex-col","items-md-center","bg-white","dark:bg-[#1b2e4b]","px-4","py-1","border","border-white-light","dark:border-dark","rounded-md","ltr:text-left","rtl:text-right",3,"ngClass","click"],[1,"flex","flex-1","justify-between","items-center"],[1,"my-3","md:my-0","font-semibold"],[1,"text-dark","dark:text-[#bfc9d4]","text-base"],[1,"text-primary"],[1,"flex","gap-x-2"],["class","bg-primary badge",4,"ngIf"],[4,"ngIf"],[1,"text-white-dark"],[1,"text-secondary"],[1,"bg-primary","badge"],[4,"ngFor","ngForOf"],["class","bg-info badge",4,"ngIf"],[1,"bg-info","badge"],[1,"tb1"],[1,"p1"],[1,"tb1_1"],[1,"s1"],[1,"s2"]],template:function(u,g){1&u&&(t.TgZ(0,"modal",0,1),t.YNc(2,ft,27,36,"ng-template",null,2,t.W1O),t.YNc(4,Et,7,4,"ng-template",null,3,t.W1O),t.qZA(),t.YNc(6,V,1,1,"ng-template",null,4,t.W1O),t.YNc(8,F,47,34,"ng-template",null,5,t.W1O))},dependencies:[S.mk,S.sg,S.O5,S.tP,E,M.z,X.Q,S.JJ,ct.X$],styles:[".tb1[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}.tb1_1[_ngcontent-%COMP%]{width:150px;display:flex;justify-content:flex-end}.tb1[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{font-weight:700}.tb1[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{font-weight:700;--tw-text-opacity: 1;color:rgb(67 97 238 / var(--tw-text-opacity))}.tb1[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem;font-weight:700;--tw-text-opacity: 1;color:rgb(128 93 202 / var(--tw-text-opacity))}.icsd[_ngcontent-%COMP%]{max-height:57vh;min-height:57vh;overflow:auto}"]})}return b})()},332:(St,nt,m)=>{m.d(nt,{B:()=>$});var t=m(6895),Y=m(3559),U=m(1258),j=m(4650);const G=[{path:"",component:U.e}];let S=(()=>{class rt{static#t=this.\u0275fac=function(W){return new(W||rt)};static#e=this.\u0275mod=j.oAB({type:rt});static#n=this.\u0275inj=j.cJS({imports:[Y.Bz.forChild(G),Y.Bz]})}return rt})();var w=m(4463),A=m(4006),E=m(4868),M=m(9116),X=m(3538),ct=m(901);let $=(()=>{class rt{static#t=this.\u0275fac=function(W){return new(W||rt)};static#e=this.\u0275mod=j.oAB({type:rt});static#n=this.\u0275inj=j.cJS({imports:[t.ez,S,M.Q,A.u5,E.tA,A.UX,w.aw,X.y,ct.b]})}return rt})()},3210:(St,nt,m)=>{m.d(nt,{$:()=>Lt});var t=m(4650),Y=m(4609),U=m(798),j=m(2924),G=m(2477),S=m(6895),w=m(4006),A=m(3538),E=m(7351),M=m(1550),X=m(4463);const ct=["PosPaymentScreenPopup"];function $(B,x){1&B&&(t.TgZ(0,"div",5),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&B&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"PaymentScreen")))}function rt(B,x){if(1&B){const f=t.EpF();t.ynx(0),t.TgZ(1,"button",24),t.NdJ("click",function(){const F=t.CHM(f).$implicit,at=t.oxw(3);return t.KtG(at.selectPredefinedCurrency(F))}),t._uU(2),t.qZA(),t.BQk()}if(2&B){const f=x.$implicit;t.xp6(1),t.Q6J("ngClass",f.selected?"btn-dark":"btn-outline-dark"),t.xp6(1),t.Oqu(f.label)}}function st(B,x){if(1&B){const f=t.EpF();t.TgZ(0,"app-calc",25),t.NdJ("bindVal",function(V){t.CHM(f);const F=t.oxw(3);return t.KtG(F.updateCalc(V))}),t.qZA()}}function ot(B,x){if(1&B){const f=t.EpF();t.ynx(0),t.TgZ(1,"button",26),t.NdJ("click",function(){const F=t.CHM(f).$implicit,at=t.oxw(3);return t.KtG(at.handleCustomAction(F.value))}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()}if(2&B){const f=x.$implicit;t.xp6(1),t.Gre("btn grow ",f.class,""),t.xp6(1),t.Oqu(t.lcZ(3,4,f.label))}}const W=function(B){return{order:B}};function ft(B,x){if(1&B){const f=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t.GkF(2,9),t.qZA(),t.TgZ(3,"div",10)(4,"p"),t._uU(5,"Payment Details"),t.qZA(),t.TgZ(6,"div",11)(7,"div",12),t.YNc(8,rt,3,2,"ng-container",13),t.qZA(),t.TgZ(9,"div",14),t._UZ(10,"input",15),t.YNc(11,st,1,0,"app-calc",16),t.qZA(),t.TgZ(12,"div",17),t.YNc(13,ot,4,6,"ng-container",13),t.qZA()(),t.TgZ(14,"div",18)(15,"div")(16,"p"),t._uU(17),t.ALo(18,"translate"),t.TgZ(19,"span",19),t._uU(20),t.ALo(21,"number"),t.qZA()(),t.TgZ(22,"p"),t._uU(23),t.ALo(24,"translate"),t.TgZ(25,"span",20),t._uU(26),t.ALo(27,"number"),t.qZA()(),t.TgZ(28,"p"),t._uU(29),t.ALo(30,"translate"),t.TgZ(31,"span",21),t._uU(32),t.ALo(33,"number"),t.qZA()()(),t.TgZ(34,"button",22),t.NdJ("click",function(){t.CHM(f);const V=t.oxw(2);return t.KtG(V.save())}),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t.TgZ(37,"div")(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"textarea",23),t.NdJ("ngModelChange",function(V){t.CHM(f);const F=t.oxw(2);return t.KtG(F.componentData.orderDetails.notes=V)}),t.qZA()()()()}if(2&B){const f=t.oxw(2),Q=t.MAs(7);let V,F,at;t.xp6(2),t.Q6J("ngTemplateOutlet",Q)("ngTemplateOutletContext",t.VKq(31,W,f.componentData.orderDetails)),t.xp6(6),t.Q6J("ngForOf",f.lstLkps.lstPredefinedCurrenciesValues),t.xp6(2),t.Q6J("value",f.calcValue),t.xp6(1),t.Q6J("ngIf",f.renderCalc),t.xp6(2),t.Q6J("ngForOf",f.lstLkps.ExtraActions),t.xp6(4),t.hij("",t.lcZ(18,15,"Paid"),": "),t.xp6(3),t.Oqu(t.lcZ(21,17,null!==(V=f.componentData.orderDetails.paid)&&void 0!==V?V:0)),t.xp6(3),t.hij("",t.lcZ(24,19,"Remain"),": "),t.xp6(3),t.Oqu(t.lcZ(27,21,null!==(F=f.componentData.orderDetails.remaining)&&void 0!==F?F:0)),t.xp6(3),t.hij("",t.lcZ(30,23,"ToReturn"),": "),t.xp6(3),t.Oqu(t.lcZ(33,25,(null!==(at=f.componentData.orderDetails.paid)&&void 0!==at?at:0)-(null!==(at=f.componentData.orderDetails.finalTotal)&&void 0!==at?at:0))),t.xp6(3),t.Oqu(t.lcZ(36,27,"Save")),t.xp6(4),t.hij("",t.lcZ(40,29,"InvoiceNote")," "),t.xp6(2),t.Q6J("ngModel",f.componentData.orderDetails.notes)}}function Mt(B,x){if(1&B&&t.YNc(0,ft,42,33,"div",6),2&B){const f=t.oxw();t.Q6J("ngIf",f.componentData.orderDetails)}}const Et=function(){return{textSize:"text-md",itemsView:1,totalsView:1,spaceYaxis:1,masterClasses:""}};function Tt(B,x){if(1&B&&t._UZ(0,"app-cart-items",27),2&B){const f=x.order;t.Akn(t.DdM(3,Et)),t.Q6J("orderDetails",f)}}let Lt=(()=>{class B{constructor(f,Q,V,F){this.gto=f,this.invoiceHelperService=Q,this.managementService=V,this.common=F,this.options={},this.lstLkpKeys=["lstPredefinedCurrenciesValues"],this.lstLkps={ExtraActions:[{label:"Clear",value:"Clear",class:"btn-danger"},{label:"ChangeCurrency",value:"CC",class:"btn-secondary"},{label:"Split",value:"Split",class:"btn-info"},{label:"Visa",value:"Visa",class:"btn-danger"},{label:"Auto",value:"Auto",class:"btn-success"}]},this.calcValue="",this.renderCalc=!0,this.lstWords={PaymentShouldEqualTotal:""},this.common.loadLkps(this.lstLkpKeys,this.lstLkps),f.openPosPaymentScreen$.subscribe(at=>{this.componentData=at,this.resetModel(),this.componentData.forOrderId?this.managementService.InvoiceDetails({id:this.componentData.forOrderId}).subscribe(b=>{this.componentData.orderDetails=b,this.checkRelatedSelectedPredefinedCurr()}):this.checkRelatedSelectedPredefinedCurr(),this.openModel()}),this.common.translateList(this.lstWords),this.common.translateList(this.lstLkps.ExtraActions)}openModel(){this.PosPaymentScreenPopup?.open()}resetModel(){this.lstLkps.lstPredefinedCurrenciesValues.forEach(f=>f.selected=!1),this.clearBtn()}checkRelatedSelectedPredefinedCurr(){this.lstLkps.lstPredefinedCurrenciesValues.forEach(f=>{f.selected=f.value==this.componentData.orderDetails.paid})}handleCustomAction(f){"Clear"==f?this.clearBtn():"Auto"==f&&this.autoBtn()}clearBtn(){this.reRenderCalc(),this.updateInvoiceCalculateion(0),this.calcValue=""}autoBtn(){this.calcValue=this.componentData.orderDetails.finalTotal,this.updateInvoiceCalculateion(this.componentData.orderDetails.finalTotal)}updateInvoiceCalculateion(f){this.componentData.orderDetails.paid=f,this.invoiceHelperService.updateInvoiceCalculateion(this.componentData.orderDetails),this.checkRelatedSelectedPredefinedCurr()}updateCalc(f){this.calcValue=f,this.updateInvoiceCalculateion(Number(f))}selectPredefinedCurrency(f){this.calcValue=f.value,this.updateInvoiceCalculateion(f.value)}reRenderCalc(){this.renderCalc=!1,setTimeout(()=>{this.renderCalc=!0},10)}save(){this.componentData.orderDetails.paid==this.componentData.orderDetails.finalTotal?(this.gto.closePosPaymentScreen$.next({...this.componentData.orderDetails,paid:this.componentData.orderDetails.paid}),this.PosPaymentScreenPopup.close()):this.common.error(this.lstWords.PaymentShouldEqualTotal)}static#t=this.\u0275fac=function(Q){return new(Q||B)(t.Y36(Y.L),t.Y36(U.w),t.Y36(j.i),t.Y36(G.j))};static#e=this.\u0275cmp=t.Xpm({type:B,selectors:[["app-pay-order-popup"]],viewQuery:function(Q,V){if(1&Q&&t.Gf(ct,7),2&Q){let F;t.iGM(F=t.CRH())&&(V.PosPaymentScreenPopup=F.first)}},decls:8,vars:0,consts:[[1,"modal-top","rounded","extra-large-modal","paymentPop"],["PosPaymentScreenPopup",""],["modalHeader",""],["modalBody",""],["CartItemView",""],[1,"!py-2","title"],["class","grid grid-cols-8 pb-4",4,"ngIf"],[1,"grid","grid-cols-8","pb-4"],[1,"col-span-3","pr-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-span-5"],[1,"gap-x-2","grid","grid-cols-4"],[1,"flex","flex-col","space-y-1"],[4,"ngFor","ngForOf"],[1,"space-y-1","col-span-2","mx-auto","w-64"],["type","text","readonly","",1,"mb-1","p-2","border","border-gray-300","rounded","focus:outline-none","w-full","text-xl",2,"height","55px",3,"value"],[3,"bindVal",4,"ngIf"],[1,"flex","flex-col","space-y-1","rtl:pr-2","ltr:pl-2"],[1,"flex","justify-between","pt-1"],[1,"font-bold","text-primary"],[1,"font-bold"],[1,"font-bold","text-danger","text-lg"],[1,"w-28","btn","btn-primary",3,"click"],["rows","1",1,"form-input",3,"ngModel","ngModelChange"],[1,"btn","btn-lg","grow",3,"ngClass","click"],[3,"bindVal"],[3,"click"],[3,"orderDetails"]],template:function(Q,V){1&Q&&(t.TgZ(0,"modal",0,1),t.YNc(2,$,3,3,"ng-template",null,2,t.W1O),t.YNc(4,Mt,1,1,"ng-template",null,3,t.W1O),t.qZA(),t.YNc(6,Tt,1,4,"ng-template",null,4,t.W1O))},dependencies:[S.mk,S.sg,S.O5,S.tP,w.Fj,w.JJ,w.On,A.z,E.b,M.F,S.JJ,X.X$]})}return B})()},8904:(St,nt,m)=>{m.d(nt,{l:()=>rt});var t=m(6895),Y=m(3559),U=m(3210),j=m(4650);const G=[{path:"",component:U.$}];let S=(()=>{class st{static#t=this.\u0275fac=function(ft){return new(ft||st)};static#e=this.\u0275mod=j.oAB({type:st});static#n=this.\u0275inj=j.cJS({imports:[Y.Bz.forChild(G),Y.Bz]})}return st})();var w=m(4006),A=m(4868),E=m(9116),M=m(3538),X=m(3826),ct=m(4007),$=m(9798);let rt=(()=>{class st{static#t=this.\u0275fac=function(ft){return new(ft||st)};static#e=this.\u0275mod=j.oAB({type:st});static#n=this.\u0275inj=j.cJS({imports:[t.ez,S,E.Q,w.u5,A.tA,w.UX,$.m,M.y,X.n,ct.d]})}return st})()},2808:(St,nt,m)=>{m.d(nt,{Z:()=>b});var t=m(4650),Y=m(4609),U=m(133),j=m(2924),G=m(2477),S=m(6895);const w=["template"];function A(l,d){if(1&l&&(t.O4$(),t.TgZ(0,"svg",1),t._UZ(1,"path",2)(2,"path",3)(3,"path",4)(4,"path",5)(5,"path",6)(6,"path",7),t.qZA()),2&l){const u=t.oxw();t.Q6J("ngClass",u.class)}}let E=(()=>{class l{constructor(u){this.viewContainerRef=u,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(g){return new(g||l)(t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["icon-list-check"]],viewQuery:function(g,v){if(1&g&&t.Gf(w,7),2&g){let C;t.iGM(C=t.CRH())&&(v.template=C.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["d","M2 5.5L3.21429 7L7.5 3","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["opacity","0.5","d","M2 12.5L3.21429 14L7.5 10","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M2 19.5L3.21429 21L7.5 17","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M22 19L12 19","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M22 12L12 12","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M22 5L12 5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"]],template:function(g,v){1&g&&t.YNc(0,A,7,1,"ng-template",null,0,t.W1O)},dependencies:[S.mk],encapsulation:2})}return l})();var M=m(9786),X=m(4868),ct=m(3538),$=m(4463);const rt=["PosOrdersListPopup"];function st(l,d){1&l&&(t.TgZ(0,"div",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"OrdersList")))}function ot(l,d){if(1&l){const u=t.EpF();t.TgZ(0,"div",18),t.NdJ("dblclick",function(){const C=t.CHM(u).data,k=t.oxw(2);return t.KtG(k.navTo(C))}),t.TgZ(1,"strong",19),t._uU(2),t.qZA()()}if(2&l){const u=d.data;t.xp6(2),t.hij(" ",u.id," ")}}function W(l,d){if(1&l&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&l){const u=t.oxw().data;t.Gre("badge bg-",u.InvoicePosTypeColor,""),t.xp6(1),t.hij(" ",u.posTableName," ")}}function ft(l,d){if(1&l&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&l){const u=t.oxw().data;t.Gre("badge bg-",u.InvoicePosTypeColor,""),t.xp6(1),t.hij(" ",u.accountName," ")}}function Mt(l,d){if(1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,W,2,4,"p",20),t.YNc(4,ft,2,4,"p",20)),2&l){const u=d.data;t.Gre("badge badge-outline-",u.InvoicePosTypeColor,""),t.xp6(1),t.hij(" ",t.lcZ(2,6,u.InvoicePosTypeLbl)," "),t.xp6(2),t.Q6J("ngIf",2==u.invoicePosType),t.xp6(1),t.Q6J("ngIf",1==u.invoicePosType)}}function Et(l,d){if(1&l){const u=t.EpF();t.TgZ(0,"p",21),t.NdJ("dblclick",function(){const C=t.CHM(u).data,k=t.oxw(2);return t.KtG(k.navTo(C))}),t._uU(1),t.ALo(2,"number"),t.qZA()}if(2&l){const u=d.data;t.xp6(1),t.hij(" ",t.lcZ(2,1,u.finalTotal)," ")}}function Tt(l,d){if(1&l&&(t.TgZ(0,"div")(1,"strong",19),t._uU(2),t.qZA()()),2&l){const u=d.data;t.xp6(2),t.hij(" ",u.createDate," ")}}function Lt(l,d){if(1&l&&(t.TgZ(0,"p",22),t._uU(1),t.qZA()),2&l){const u=d.data;t.xp6(1),t.hij(" ",u.createByName," ")}}function B(l,d){if(1&l){const u=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(u);const v=t.oxw(2).data,C=t.oxw(2);return t.KtG(C.listAction("Pay",v))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Pay")))}function x(l,d){if(1&l){const u=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(u);const v=t.oxw(2).data,C=t.oxw(2);return t.KtG(C.listAction("Pick",v))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Pick")))}function f(l,d){if(1&l&&(t.TgZ(0,"div",24),t.YNc(1,B,3,3,"button",25),t.YNc(2,x,3,3,"button",26),t.qZA()),2&l){const u=t.oxw(3);t.xp6(1),t.Q6J("ngIf",u.buttons.Pay),t.xp6(1),t.Q6J("ngIf",u.buttons.Pick)}}function Q(l,d){if(1&l){const u=t.EpF();t.TgZ(0,"div",24)(1,"button",29),t.NdJ("click",function(){t.CHM(u);const v=t.oxw().data,C=t.oxw(2);return t.KtG(C.listAction("ShowOrderDetails",v))}),t._UZ(2,"icon-list-check",30),t.qZA(),t.TgZ(3,"button",31),t.NdJ("click",function(){t.CHM(u);const v=t.oxw().data,C=t.oxw(2);return t.KtG(C.listAction("PrintOrder",v))}),t._UZ(4,"icon-printer",30),t.qZA()()}}function V(l,d){if(1&l&&(t.YNc(0,f,3,2,"div",23),t.YNc(1,Q,5,0,"div",23)),2&l){const u=t.oxw(2);t.Q6J("ngIf",1==u.filters.invoiceStatus),t.xp6(1),t.Q6J("ngIf",4==u.filters.invoiceStatus)}}const F=function(){return[10,15,30,50]};function at(l,d){if(1&l){const u=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"button",7),t.NdJ("click",function(){t.CHM(u);const v=t.oxw();return t.KtG(v.selectFilter(1))}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",7),t.NdJ("click",function(){t.CHM(u);const v=t.oxw();return t.KtG(v.selectFilter(4))}),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"div",8)(9,"div"),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"div"),t._uU(14),t.ALo(15,"translate"),t.ALo(16,"number"),t.qZA()()(),t.TgZ(17,"div",9)(18,"div",10)(19,"ng-datatable",11),t.NdJ("changeServer",function(v){t.CHM(u);const C=t.oxw();return t.KtG(C.changeServer(v))}),t.YNc(20,ot,3,1,"ng-template",12),t.YNc(21,Mt,5,8,"ng-template",13),t.YNc(22,Et,3,3,"ng-template",14),t.YNc(23,Tt,3,1,"ng-template",15),t.YNc(24,Lt,2,1,"ng-template",16),t.YNc(25,V,2,2,"ng-template",17),t.qZA()()()}if(2&l){const u=t.oxw();t.xp6(2),t.Q6J("ngClass",1==u.filters.invoiceStatus?"btn-primary":"btn-outline-primary"),t.xp6(1),t.Oqu(t.lcZ(4,15,"PendingOrders")),t.xp6(2),t.Q6J("ngClass",4==u.filters.invoiceStatus?"btn-secondary":"btn-outline-secondary"),t.xp6(1),t.Oqu(t.lcZ(7,17,"PaidOrders")),t.xp6(4),t.AsE(" ",t.lcZ(11,19,"Totals"),": ",t.lcZ(12,21,u.otherData.total)," "),t.xp6(4),t.AsE(" ",t.lcZ(15,23,"TotalPayments"),": ",t.lcZ(16,25,u.otherData.totalPaid)," "),t.xp6(5),t.Q6J("rows",u.lstData)("columns",u.cols)("loading",u.loading)("totalRows",u.params.totalCount)("isServerMode",!0)("pageSize",u.params.max)("pageSizeOptions",t.DdM(27,F))}}let b=(()=>{class l{constructor(u,g,v,C){this.gto=u,this.shiftStateManagement=g,this.managementService=v,this.common=C,this.filters={},this.buttons={},this.actionPosOrdersList=(k="",z="")=>{this.PosOrdersListPopup?.close(),this.gto.closePosOrdersList$.next({action:k,order:z})},this.lstLkpKeys=["lstOrderPosType"],this.lstLkps={},this.params={},this.loading=!1,this.otherData={},this.cols=[{field:"OrderId",title:"OrderId"},{field:"Amount",title:"Amount"},{field:"PosTypeLbl",title:"PosType"},{field:"CreateDate",title:"CreateDate"},{field:"CreateByName",title:"CreateByName"},{field:"actions",title:"Actions"}],this.common.loadLkps(this.lstLkpKeys,this.lstLkps),this.openPosOrdersListSub=u.openPosOrdersList$.subscribe(k=>{this.componentData=k,this.filters=this.componentData.apiFilters,this.buttons=this.componentData.buttons,this.fixFilters(),this.changeServer({current_page:1,pagesize:10,sort_column:"",sort_direction:""}),this.openPosOrdersList()}),this.common.translateList(this.cols)}ngOnDestroy(){this.openPosOrdersListSub&&this.openPosOrdersListSub.unsubscribe()}fixFilters(){this.filters||(this.filters={}),this.filters.invoiceStatus||(this.filters.invoiceStatus=1)}openPosOrdersList(){this.PosOrdersListPopup?.open()}ngOnInit(){}changeServer(u){this.params=this.common.mapDataTableToParams(this.params,u),this.search()}search(){setTimeout(()=>{this.loading=!0;let u={...this.params,...this.filters,ShiftId:this.shiftStateManagement.CurrentShiftId,flag:"Pos"};this.managementService.InvoiceList(u).subscribe(g=>{this.otherData=g,this.common.fixDateTimeFormats(this.otherData.lstData,["createDate"]),this.otherData.lstData.forEach(v=>{let C=this.common.getRelatedFromLkp(this.lstLkps.lstOrderPosType,v.invoicePosType);v.InvoicePosTypeLbl=C.label,v.InvoicePosTypeColor=C.color}),this.lstData=this.otherData.lstData,this.params.totalCount=Number(this.otherData.rowsCount),this.loading=!1})},1)}selectFilter(u){this.filters.invoiceStatus=u,this.search()}listAction(u,g){this.gto.closePosOrdersList$.next({action:u,inv:g}),this.PosOrdersListPopup.close()}navTo(u){}static#t=this.\u0275fac=function(g){return new(g||l)(t.Y36(Y.L),t.Y36(U.p),t.Y36(j.i),t.Y36(G.j))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-pos-orders-list"]],viewQuery:function(g,v){if(1&g&&t.Gf(rt,7),2&g){let C;t.iGM(C=t.CRH())&&(v.PosOrdersListPopup=C.first)}},decls:6,vars:0,consts:[[1,"modal-top","rounded","large-modal","lg"],["PosOrdersListPopup",""],["modalHeader",""],["modalBody",""],[1,"!py-2","title"],[1,"flex","justify-between"],[1,"flex","gap-x-3","grow"],["type","button",1,"btn",3,"ngClass","click"],[1,"flex","justify-between","items-center","gap-x-3","p-2","font-semibold"],[1,"pb-2"],[1,"mt-2","datatable","sm-tbl"],["paginationInfo","{0} to {1} of {2}","skin","whitespace-nowrap bh-table-hover",3,"rows","columns","loading","totalRows","isServerMode","pageSize","pageSizeOptions","changeServer"],["slot","OrderId"],["slot","PosTypeLbl"],["slot","Amount"],["slot","CreateDate"],["slot","CreateByName"],["slot","actions"],[1,"",3,"dblclick"],[1,"items-center","text-info"],[3,"class",4,"ngIf"],[1,"font-bold",3,"dblclick"],[1,""],["class","flex justify-center items-center gap-2",4,"ngIf"],[1,"flex","justify-center","items-center","gap-2"],["type","button","class","w-24 h-10 btn btn-success",3,"click",4,"ngIf"],["type","button","class","w-24 h-10 btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"w-24","h-10","btn","btn-success",3,"click"],["type","button",1,"w-24","h-10","btn","btn-secondary",3,"click"],["type","button",1,"btn-icon","btn","btn-success",3,"click"],[1,"w-5","h-5"],["type","button",1,"btn-icon","btn","btn-secondary",3,"click"]],template:function(g,v){1&g&&(t.TgZ(0,"modal",0,1),t.YNc(2,st,3,3,"ng-template",null,2,t.W1O),t.YNc(4,at,26,28,"ng-template",null,3,t.W1O),t.qZA())},dependencies:[S.mk,S.O5,E,M.D,X.rr,X.Nr,ct.z,S.JJ,$.X$]})}return l})()},9126:(St,nt,m)=>{m.d(nt,{n:()=>ct});var t=m(6895),Y=m(3559),U=m(2808),j=m(4650);const G=[{path:"",component:U.Z}];let S=(()=>{class ${static#t=this.\u0275fac=function(ot){return new(ot||$)};static#e=this.\u0275mod=j.oAB({type:$});static#n=this.\u0275inj=j.cJS({imports:[Y.Bz.forChild(G),Y.Bz]})}return $})();var w=m(4463),A=m(4006),E=m(4868),M=m(9116),X=m(3538);let ct=(()=>{class ${static#t=this.\u0275fac=function(ot){return new(ot||$)};static#e=this.\u0275mod=j.oAB({type:$});static#n=this.\u0275inj=j.cJS({imports:[t.ez,S,M.Q,A.u5,E.tA,A.UX,w.aw,X.y]})}return $})()},133:(St,nt,m)=>{m.d(nt,{p:()=>S});var t=m(5861),Y=m(4650),U=m(8890),j=m(9872),G=m(4609);let S=(()=>{class w{constructor(E,M,X){this.store=E,this.accountingService=M,this.gto=X,this.DeviceKey="",this.CurrentShiftId="",this.checkedFromBe=""}CheckDeviceKey(){var E=this;return(0,t.Z)(function*(){if(!E.DeviceKey){if(!E.store.hasKey("DeviceKey"))return E.DeviceKey=yield E.store.GetNewDeviceToken(),E.store.setItem("DeviceKey",E.DeviceKey),E.DeviceKey;E.DeviceKey=yield E.store.getItem("DeviceKey")}return E.DeviceKey})()}CheckCurrentShift(E={}){var M=this;return(0,t.Z)(function*(){let X=()=>E.OnFinish?E.OnFinish():"";yield M.CheckDeviceKey(),M.CurrentShiftId?(M.SetCurrentShiftId(M.CurrentShiftId),X()):(M.CurrentShiftId=yield M.store.getItem("CurrentShiftId"),M.CurrentShiftId||M.checkedFromBe?(M.SetCurrentShiftId(M.CurrentShiftId),X()):(M.checkedFromBe=!0,M.accountingService.ShiftDetails({DeviceKey:M.DeviceKey?M.DeviceKey:"DEVICETOKEN",ActiveOnly:!0}).subscribe(ct=>{ct&&ct.id&&(M.CurrentShiftId=ct.id,M.SetCurrentShiftId(M.CurrentShiftId),X())})))})()}SetCurrentShiftId(E){this.store.setItem("CurrentShiftId",E),this.CurrentShiftId=E,this.gto.currentActiveShiftChanged$.next(this.CurrentShiftId)}ClearCurrentShiftId(){this.store.removeItem("CurrentShiftId"),this.CurrentShiftId=0,this.gto.currentActiveShiftChanged$.next("")}CreateShift(){}CloseShift(){}ShiftCommand(E){"Create"==E&&this.CheckCurrentShift({CreateShift:()=>this.CreateShift()})}static#t=this.\u0275fac=function(M){return new(M||w)(Y.LFG(U.T),Y.LFG(j.S),Y.LFG(G.L))};static#e=this.\u0275prov=Y.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})()},454:(St,nt,m)=>{m.d(nt,{V:()=>j});var t=m(4650),Y=m(133),U=m(4609);let j=(()=>{class G{constructor(w,A,E,M){this.el=w,this.renderer=A,this.shiftManagement=E,this.gto=M}ngOnInit(){this.shiftManagement.CheckCurrentShift(),this.shiftSub=this.gto.currentActiveShiftChanged$.subscribe(w=>{this.updateDisabledState(!w)}),this.shiftManagement.CurrentShiftId||this.updateDisabledState(!0)}updateDisabledState(w){const A=this.el.nativeElement;w?(this.renderer.setAttribute(A,"disabled","true"),this.renderer.setStyle(A,"opacity","0.5"),this.renderer.setStyle(A,"cursor","not-allowed"),this.renderer.listen(A,"click",E=>E.preventDefault()),this.renderer.setAttribute(A,"title","You should open a shift first")):(this.renderer.removeAttribute(A,"disabled"),this.renderer.removeStyle(A,"opacity"),this.renderer.removeStyle(A,"cursor"),this.renderer.removeAttribute(A,"title"))}ngOnDestroy(){this.shiftSub?.unsubscribe()}static#t=this.\u0275fac=function(A){return new(A||G)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Y.p),t.Y36(U.L))};static#e=this.\u0275dir=t.lG2({type:G,selectors:[["","appShiftBlock",""]]})}return G})()},9786:(St,nt,m)=>{m.d(nt,{D:()=>G});var t=m(4650),Y=m(6895);const U=["template"];function j(S,w){if(1&S&&(t.O4$(),t.TgZ(0,"svg",1),t._UZ(1,"path",2)(2,"path",3)(3,"path",4)(4,"path",5)(5,"path",6)(6,"circle",7)(7,"path",8)(8,"path",9),t.qZA()),2&S){const A=t.oxw();t.Q6J("ngClass",A.class)}}let G=(()=>{class S{constructor(A){this.viewContainerRef=A,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(E){return new(E||S)(t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:S,selectors:[["icon-printer"]],viewQuery:function(E,M){if(1&E&&t.Gf(U,7),2&E){let X;t.iGM(X=t.CRH())&&(M.template=X.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["d","M6 17.9827C4.44655 17.9359 3.51998 17.7626 2.87868 17.1213C2 16.2426 2 14.8284 2 12C2 9.17157 2 7.75736 2.87868 6.87868C3.75736 6 5.17157 6 8 6H16C18.8284 6 20.2426 6 21.1213 6.87868C22 7.75736 22 9.17157 22 12C22 14.8284 22 16.2426 21.1213 17.1213C20.48 17.7626 19.5535 17.9359 18 17.9827","stroke","currentColor","stroke-width","1.5"],["opacity","0.5","d","M9 10H6","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M19 14L5 14","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M18 14V16C18 18.8284 18 20.2426 17.1213 21.1213C16.2426 22 14.8284 22 12 22C9.17157 22 7.75736 22 6.87868 21.1213C6 20.2426 6 18.8284 6 16V14","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M17.9827 6C17.9359 4.44655 17.7626 3.51998 17.1213 2.87868C16.2427 2 14.8284 2 12 2C9.17158 2 7.75737 2 6.87869 2.87868C6.23739 3.51998 6.06414 4.44655 6.01733 6","stroke","currentColor","stroke-width","1.5"],["opacity","0.5","cx","17","cy","10","r","1","fill","currentColor"],["opacity","0.5","d","M15 16.5H9","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M13 19H9","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"]],template:function(E,M){1&E&&t.YNc(0,j,9,1,"ng-template",null,0,t.W1O)},dependencies:[Y.mk],encapsulation:2})}return S})()},9872:(St,nt,m)=>{m.d(nt,{S:()=>j});var t=m(4650),Y=m(1801),U=m(2477);let j=(()=>{class G{constructor(w,A){this.http=w,this.common=A,this.mainRoute="Accounting"}AddFloor(w){return this.http.post(`${this.mainRoute}/AddFloor`,w)}FloorDetails(w){return this.http.getWithObj(`${this.mainRoute}/FloorDetails`,w)}FloorsList(w){return this.http.getWithObj(`${this.mainRoute}/FloorsList`,w)}GetTablesStatuses(w){return this.http.getWithObj(`${this.mainRoute}/GetTablesStatuses`,w)}AddShift(w){return this.http.post(`${this.mainRoute}/AddShift`,w)}ShiftDetails(w){return this.http.getWithObj(`${this.mainRoute}/ShiftDetails`,w)}ShiftsList(w){return this.http.getWithObj(`${this.mainRoute}/ShiftsList`,w)}static#t=this.\u0275fac=function(A){return new(A||G)(t.LFG(Y.q),t.LFG(U.j))};static#e=this.\u0275prov=t.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"})}return G})()},901:(St,nt,m)=>{m.d(nt,{Q:()=>kn,b:()=>Fn});var t=m(4650);function Y(i,n){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);n&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,o)}return e}function U(i){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(e),!0).forEach(function(o){G(i,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Y(Object(e)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(e,o))})}return i}function j(i){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}function G(i,n,e){return n in i?Object.defineProperty(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}function S(){return S=Object.assign||function(i){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},S.apply(this,arguments)}function ot(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var W=ot(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ft=ot(/Edge/i),Mt=ot(/firefox/i),Et=ot(/safari/i)&&!ot(/chrome/i)&&!ot(/android/i),Tt=ot(/iP(ad|od|hone)/i),Lt=ot(/chrome/i)&&ot(/android/i),B={capture:!1,passive:!1};function x(i,n,e){i.addEventListener(n,e,!W&&B)}function f(i,n,e){i.removeEventListener(n,e,!W&&B)}function Q(i,n){if(n){if(">"===n[0]&&(n=n.substring(1)),i)try{if(i.matches)return i.matches(n);if(i.msMatchesSelector)return i.msMatchesSelector(n);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(n)}catch{return!1}return!1}}function V(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function F(i,n,e,o){if(i){e=e||document;do{if(null!=n&&(">"===n[0]?i.parentNode===e&&Q(i,n):Q(i,n))||o&&i===e)return i;if(i===e)break}while(i=V(i))}return null}var qt,at=/\s+/g;function b(i,n,e){if(i&&n)if(i.classList)i.classList[e?"add":"remove"](n);else{var o=(" "+i.className+" ").replace(at," ").replace(" "+n+" "," ");i.className=(o+(e?" "+n:"")).replace(at," ")}}function l(i,n,e){var o=i&&i.style;if(o){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),void 0===n?e:e[n];!(n in o)&&-1===n.indexOf("webkit")&&(n="-webkit-"+n),o[n]=e+("string"==typeof e?"":"px")}}function d(i,n){var e="";if("string"==typeof i)e=i;else do{var o=l(i,"transform");o&&"none"!==o&&(e=o+" "+e)}while(!n&&(i=i.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function u(i,n,e){if(i){var o=i.getElementsByTagName(n),r=0,s=o.length;if(e)for(;r<s;r++)e(o[r],r);return o}return[]}function g(){return document.scrollingElement||document.documentElement}function v(i,n,e,o,r){if(i.getBoundingClientRect||i===window){var s,a,c,p,h,O,y;if(i!==window&&i.parentNode&&i!==g()?(a=(s=i.getBoundingClientRect()).top,c=s.left,p=s.bottom,h=s.right,O=s.height,y=s.width):(a=0,c=0,p=window.innerHeight,h=window.innerWidth,O=window.innerHeight,y=window.innerWidth),(n||e)&&i!==window&&(r=r||i.parentNode,!W))do{if(r&&r.getBoundingClientRect&&("none"!==l(r,"transform")||e&&"static"!==l(r,"position"))){var D=r.getBoundingClientRect();a-=D.top+parseInt(l(r,"border-top-width")),c-=D.left+parseInt(l(r,"border-left-width")),p=a+s.height,h=c+s.width;break}}while(r=r.parentNode);if(o&&i!==window){var R=d(r||i),L=R&&R.a,K=R&&R.d;R&&(p=(a/=K)+(O/=K),h=(c/=L)+(y/=L))}return{top:a,left:c,bottom:p,right:h,width:y,height:O}}}function C(i,n,e){for(var o=Zt(i,!0),r=v(i)[n];o;){var s=v(o)[e];if(!("top"===e||"left"===e?r>=s:r<=s))return o;if(o===g())break;o=Zt(o,!1)}return!1}function k(i,n,e,o){for(var r=0,s=0,a=i.children;s<a.length;){if("none"!==a[s].style.display&&a[s]!==I.ghost&&(o||a[s]!==I.dragged)&&F(a[s],e.draggable,i,!1)){if(r===n)return a[s];r++}s++}return null}function z(i,n){for(var e=i.lastElementChild;e&&(e===I.ghost||"none"===l(e,"display")||n&&!Q(e,n));)e=e.previousElementSibling;return e||null}function Z(i,n){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)"TEMPLATE"!==i.nodeName.toUpperCase()&&i!==I.clone&&(!n||Q(i,n))&&e++;return e}function Ct(i){var n=0,e=0,o=g();if(i)do{var r=d(i);n+=i.scrollLeft*r.a,e+=i.scrollTop*r.d}while(i!==o&&(i=i.parentNode));return[n,e]}function Zt(i,n){if(!i||!i.getBoundingClientRect)return g();var e=i,o=!1;do{if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=l(e);if(e.clientWidth<e.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||e.clientHeight<e.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!e.getBoundingClientRect||e===document.body)return g();if(o||n)return e;o=!0}}}while(e=e.parentNode);return g()}function Te(i,n){return Math.round(i.top)===Math.round(n.top)&&Math.round(i.left)===Math.round(n.left)&&Math.round(i.height)===Math.round(n.height)&&Math.round(i.width)===Math.round(n.width)}function Qe(i,n){return function(){if(!qt){var e=arguments;1===e.length?i.call(this,e[0]):i.apply(this,e),qt=setTimeout(function(){qt=void 0},n)}}}function qe(i,n,e){i.scrollLeft+=n,i.scrollTop+=e}function Pe(i){var n=window.Polymer,e=window.jQuery||window.Zepto;return n&&n.dom?n.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}function $e(i,n,e){var o={};return Array.from(i.children).forEach(function(r){var s,a,c,p;if(F(r,n.draggable,i,!1)&&!r.animated&&r!==e){var h=v(r);o.left=Math.min(null!==(s=o.left)&&void 0!==s?s:1/0,h.left),o.top=Math.min(null!==(a=o.top)&&void 0!==a?a:1/0,h.top),o.right=Math.max(null!==(c=o.right)&&void 0!==c?c:-1/0,h.right),o.bottom=Math.max(null!==(p=o.bottom)&&void 0!==p?p:-1/0,h.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var dt="Sortable"+(new Date).getTime();var Gt=[],Me={initializeByDefault:!0},Xt={mount:function(n){for(var e in Me)Me.hasOwnProperty(e)&&!(e in n)&&(n[e]=Me[e]);Gt.forEach(function(o){if(o.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),Gt.push(n)},pluginEvent:function(n,e,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var s=n+"Global";Gt.forEach(function(a){e[a.pluginName]&&(e[a.pluginName][s]&&e[a.pluginName][s](U({sortable:e},o)),e.options[a.pluginName]&&e[a.pluginName][n]&&e[a.pluginName][n](U({sortable:e},o)))})},initializePlugins:function(n,e,o,r){for(var s in Gt.forEach(function(c){var p=c.pluginName;if(n.options[p]||c.initializeByDefault){var h=new c(n,e,n.options);h.sortable=n,h.options=n.options,n[p]=h,S(o,h.defaults)}}),n.options)if(n.options.hasOwnProperty(s)){var a=this.modifyOption(n,s,n.options[s]);typeof a<"u"&&(n.options[s]=a)}},getEventProperties:function(n,e){var o={};return Gt.forEach(function(r){"function"==typeof r.eventProperties&&S(o,r.eventProperties.call(e[r.pluginName],n))}),o},modifyOption:function(n,e,o){var r;return Gt.forEach(function(s){n[s.pluginName]&&s.optionListeners&&"function"==typeof s.optionListeners[e]&&(r=s.optionListeners[e].call(n[s.pluginName],o))}),r}};var vn=["evt"],gt=function(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.evt,s=function A(i,n){if(null==i)return{};var o,r,e=function w(i,n){if(null==i)return{};var r,s,e={},o=Object.keys(i);for(s=0;s<o.length;s++)!(n.indexOf(r=o[s])>=0)&&(e[r]=i[r]);return e}(i,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)!(n.indexOf(o=s[r])>=0)&&Object.prototype.propertyIsEnumerable.call(i,o)&&(e[o]=i[o])}return e}(o,vn);Xt.pluginEvent.bind(I)(n,e,U({dragEl:_,parentEl:et,ghostEl:T,rootEl:q,nextEl:jt,lastDownEl:pe,cloneEl:tt,cloneHidden:Nt,dragStarted:zt,putSortable:ut,activeSortable:I.active,originalEvent:r,oldIndex:Jt,oldDraggableIndex:Vt,newIndex:_t,newDraggableIndex:kt,hideGhostForTarget:rn,unhideGhostForTarget:sn,cloneNowHidden:function(){Nt=!0},cloneNowShown:function(){Nt=!1},dispatchSortableEvent:function(c){ht({sortable:e,name:c,originalEvent:r})}},s))};function ht(i){!function $t(i){var n=i.sortable,e=i.rootEl,o=i.name,r=i.targetEl,s=i.cloneEl,a=i.toEl,c=i.fromEl,p=i.oldIndex,h=i.newIndex,O=i.oldDraggableIndex,y=i.newDraggableIndex,D=i.originalEvent,R=i.putSortable,L=i.extraEventProperties;if(n=n||e&&e[dt]){var K,mt=n.options,xt="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||W||ft?(K=document.createEvent("Event")).initEvent(o,!0,!0):K=new CustomEvent(o,{bubbles:!0,cancelable:!0}),K.to=a||e,K.from=c||e,K.item=r||e,K.clone=s,K.oldIndex=p,K.newIndex=h,K.oldDraggableIndex=O,K.newDraggableIndex=y,K.originalEvent=D,K.pullMode=R?R.lastPutMode:void 0;var N=U(U({},L),Xt.getEventProperties(o,n));for(var H in N)K[H]=N[H];e&&e.dispatchEvent(K),mt[xt]&&mt[xt].call(n,K)}}(U({putSortable:ut,cloneEl:tt,targetEl:_,rootEl:q,oldIndex:Jt,oldDraggableIndex:Vt,newIndex:_t,newDraggableIndex:kt},i))}var _,et,T,q,jt,pe,tt,Nt,Jt,_t,Vt,kt,fe,ut,Bt,It,Le,Ze,Ve,ze,zt,Wt,te,ve,pt,Ht=!1,he=!1,me=[],ee=!1,ge=!1,Ne=[],ke=!1,_e=[],be=typeof document<"u",ye=Tt,tn=ft||W?"cssFloat":"float",_n=be&&!Lt&&!Tt&&"draggable"in document.createElement("div"),en=function(){if(be){if(W)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto","auto"===i.style.pointerEvents}}(),nn=function(n,e){var o=l(n),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=k(n,0,e),a=k(n,1,e),c=s&&l(s),p=a&&l(a),h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+v(s).width,O=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+v(a).width;return"flex"===o.display?"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal":"grid"===o.display?o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":s&&c.float&&"none"!==c.float?!a||"both"!==p.clear&&p.clear!==("left"===c.float?"left":"right")?"horizontal":"vertical":s&&("block"===c.display||"flex"===c.display||"table"===c.display||"grid"===c.display||h>=r&&"none"===o[tn]||a&&"none"===o[tn]&&h+O>r)?"vertical":"horizontal"},on=function(n){function e(s,a){return function(c,p,h,O){if(null==s&&(a||c.options.group.name&&p.options.group.name&&c.options.group.name===p.options.group.name))return!0;if(null==s||!1===s)return!1;if(a&&"clone"===s)return s;if("function"==typeof s)return e(s(c,p,h,O),a)(c,p,h,O);var D=(a?c:p).options.group.name;return!0===s||"string"==typeof s&&s===D||s.join&&s.indexOf(D)>-1}}var o={},r=n.group;(!r||"object"!=j(r))&&(r={name:r}),o.name=r.name,o.checkPull=e(r.pull,!0),o.checkPut=e(r.put),o.revertClone=r.revertClone,n.group=o},rn=function(){!en&&T&&l(T,"display","none")},sn=function(){!en&&T&&l(T,"display","")};be&&!Lt&&document.addEventListener("click",function(i){if(he)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),he=!1,!1},!0);var Kt=function(n){if(_){var e=function(n,e){var o;return me.some(function(r){var s=r[dt].options.emptyInsertThreshold;if(s&&!z(r)){var a=v(r);if(n>=a.left-s&&n<=a.right+s&&e>=a.top-s&&e<=a.bottom+s)return o=r}}),o}((n=n.touches?n.touches[0]:n).clientX,n.clientY);if(e){var o={};for(var r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[dt]._onDragOver(o)}}},Cn=function(n){_&&_.parentNode[dt]._isOutsideThisEl(n.target)};function I(i,n){if(!i||!i.nodeType||1!==i.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=n=S({},n),i[dt]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nn(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,c){a.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==I.supportPointer&&"PointerEvent"in window&&(!Et||Tt),emptyInsertThreshold:5};for(var o in Xt.initializePlugins(this,i,e),e)!(o in n)&&(n[o]=e[o]);for(var r in on(n),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!n.forceFallback&&_n,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?x(i,"pointerdown",this._onTapStart):(x(i,"mousedown",this._onTapStart),x(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(i,"dragover",this),x(i,"dragenter",this)),me.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),S(this,function hn(){var n,i=[];return{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(r){if("none"!==l(r,"display")&&r!==I.ghost){i.push({target:r,rect:v(r)});var s=U({},i[i.length-1].rect);if(r.thisAnimationDuration){var a=d(r,!0);a&&(s.top-=a.f,s.left-=a.e)}r.fromRect=s}})},addAnimationState:function(o){i.push(o)},removeAnimationState:function(o){i.splice(function Se(i,n){for(var e in i)if(i.hasOwnProperty(e))for(var o in n)if(n.hasOwnProperty(o)&&n[o]===i[e][o])return Number(e);return-1}(i,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof o&&o());var s=!1,a=0;i.forEach(function(c){var p=0,h=c.target,O=h.fromRect,y=v(h),D=h.prevFromRect,R=h.prevToRect,L=c.rect,K=d(h,!0);K&&(y.top-=K.f,y.left-=K.e),h.toRect=y,h.thisAnimationDuration&&Te(D,y)&&!Te(O,y)&&(L.top-y.top)/(L.left-y.left)==(O.top-y.top)/(O.left-y.left)&&(p=function gn(i,n,e,o){return Math.sqrt(Math.pow(n.top-i.top,2)+Math.pow(n.left-i.left,2))/Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))*o.animation}(L,D,R,r.options)),Te(y,O)||(h.prevFromRect=O,h.prevToRect=y,p||(p=r.options.animation),r.animate(h,L,y,p)),p&&(s=!0,a=Math.max(a,p),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},p),h.thisAnimationDuration=p)}),clearTimeout(n),s?n=setTimeout(function(){"function"==typeof o&&o()},a):"function"==typeof o&&o(),i=[]},animate:function(o,r,s,a){if(a){l(o,"transition",""),l(o,"transform","");var c=d(this.el),O=(r.left-s.left)/(c&&c.a||1),y=(r.top-s.top)/(c&&c.d||1);o.animatingX=!!O,o.animatingY=!!y,l(o,"transform","translate3d("+O+"px,"+y+"px,0)"),this.forRepaintDummy=function mn(i){return i.offsetWidth}(o),l(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),l(o,"transform","translate3d(0,0,0)"),"number"==typeof o.animated&&clearTimeout(o.animated),o.animated=setTimeout(function(){l(o,"transition",""),l(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}())}function Ce(i,n,e,o,r,s,a,c){var p,y,h=i[dt],O=h.options.onMove;return!window.CustomEvent||W||ft?(p=document.createEvent("Event")).initEvent("move",!0,!0):p=new CustomEvent("move",{bubbles:!0,cancelable:!0}),p.to=n,p.from=i,p.dragged=e,p.draggedRect=o,p.related=r||n,p.relatedRect=s||v(n),p.willInsertAfter=c,p.originalEvent=a,i.dispatchEvent(p),O&&(y=O.call(h,p,a)),y}function Fe(i){i.draggable=!1}function xn(){ke=!1}function Sn(i){for(var n=i.tagName+i.className+i.src+i.href+i.textContent,e=n.length,o=0;e--;)o+=n.charCodeAt(e);return o.toString(36)}function Oe(i){return setTimeout(i,0)}function Re(i){return clearTimeout(i)}I.prototype={constructor:I,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(Wt=null)},_getDirection:function(n,e){return"function"==typeof this.options.direction?this.options.direction.call(this,n,e,_):this.options.direction},_onTapStart:function(n){if(n.cancelable){var e=this,o=this.el,r=this.options,s=r.preventOnFilter,a=n.type,c=n.touches&&n.touches[0]||n.pointerType&&"touch"===n.pointerType&&n,p=(c||n).target,h=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||p,O=r.filter;if(function Tn(i){_e.length=0;for(var n=i.getElementsByTagName("input"),e=n.length;e--;){var o=n[e];o.checked&&_e.push(o)}}(o),!_&&!(/mousedown|pointerdown/.test(a)&&0!==n.button||r.disabled)&&!h.isContentEditable&&(this.nativeDraggable||!Et||!p||"SELECT"!==p.tagName.toUpperCase())&&!((p=F(p,r.draggable,o,!1))&&p.animated||pe===p)){if(Jt=Z(p),Vt=Z(p,r.draggable),"function"==typeof O){if(O.call(this,n,p,this))return ht({sortable:e,rootEl:h,name:"filter",targetEl:p,toEl:o,fromEl:o}),gt("filter",e,{evt:n}),void(s&&n.preventDefault())}else if(O&&(O=O.split(",").some(function(y){if(y=F(h,y.trim(),o,!1))return ht({sortable:e,rootEl:y,name:"filter",targetEl:p,fromEl:o,toEl:o}),gt("filter",e,{evt:n}),!0})))return void(s&&n.preventDefault());r.handle&&!F(h,r.handle,o,!1)||this._prepareDragStart(n,c,p)}}},_prepareDragStart:function(n,e,o){var p,r=this,s=r.el,a=r.options,c=s.ownerDocument;if(o&&!_&&o.parentNode===s){var h=v(o);if(q=s,et=(_=o).parentNode,jt=_.nextSibling,pe=o,fe=a.group,I.dragged=_,Ve=(Bt={target:_,clientX:(e||n).clientX,clientY:(e||n).clientY}).clientX-h.left,ze=Bt.clientY-h.top,this._lastX=(e||n).clientX,this._lastY=(e||n).clientY,_.style["will-change"]="all",p=function(){gt("delayEnded",r,{evt:n}),I.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!Mt&&r.nativeDraggable&&(_.draggable=!0),r._triggerDragStart(n,e),ht({sortable:r,name:"choose",originalEvent:n}),b(_,a.chosenClass,!0))},a.ignore.split(",").forEach(function(O){u(_,O.trim(),Fe)}),x(c,"dragover",Kt),x(c,"mousemove",Kt),x(c,"touchmove",Kt),a.supportPointer?(x(c,"pointerup",r._onDrop),!this.nativeDraggable&&x(c,"pointercancel",r._onDrop)):(x(c,"mouseup",r._onDrop),x(c,"touchend",r._onDrop),x(c,"touchcancel",r._onDrop)),Mt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,_.draggable=!0),gt("delayStart",this,{evt:n}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(ft||W))p();else{if(I.eventCanceled)return void this._onDrop();a.supportPointer?(x(c,"pointerup",r._disableDelayedDrag),x(c,"pointercancel",r._disableDelayedDrag)):(x(c,"mouseup",r._disableDelayedDrag),x(c,"touchend",r._disableDelayedDrag),x(c,"touchcancel",r._disableDelayedDrag)),x(c,"mousemove",r._delayedDragTouchMoveHandler),x(c,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&x(c,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(p,a.delay)}}},_delayedDragTouchMoveHandler:function(n){var e=n.touches?n.touches[0]:n;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){_&&Fe(_),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;f(n,"mouseup",this._disableDelayedDrag),f(n,"touchend",this._disableDelayedDrag),f(n,"touchcancel",this._disableDelayedDrag),f(n,"pointerup",this._disableDelayedDrag),f(n,"pointercancel",this._disableDelayedDrag),f(n,"mousemove",this._delayedDragTouchMoveHandler),f(n,"touchmove",this._delayedDragTouchMoveHandler),f(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,e){e=e||"touch"==n.pointerType&&n,!this.nativeDraggable||e?x(document,this.options.supportPointer?"pointermove":e?"touchmove":"mousemove",this._onTouchMove):(x(_,"dragend",this),x(q,"dragstart",this._onDragStart));try{document.selection?Oe(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,e){if(Ht=!1,q&&_){gt("dragStarted",this,{evt:e}),this.nativeDraggable&&x(document,"dragover",Cn);var o=this.options;!n&&b(_,o.dragClass,!1),b(_,o.ghostClass,!0),I.active=this,n&&this._appendGhost(),ht({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(It){this._lastX=It.clientX,this._lastY=It.clientY,rn();for(var n=document.elementFromPoint(It.clientX,It.clientY),e=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(It.clientX,It.clientY))!==e;)e=n;if(_.parentNode[dt]._isOutsideThisEl(n),e)do{if(e[dt]&&e[dt]._onDragOver({clientX:It.clientX,clientY:It.clientY,target:n,rootEl:e})&&!this.options.dragoverBubble)break;n=e}while(e=V(e));sn()}},_onTouchMove:function(n){if(Bt){var e=this.options,o=e.fallbackTolerance,r=e.fallbackOffset,s=n.touches?n.touches[0]:n,a=T&&d(T,!0),c=T&&a&&a.a,p=T&&a&&a.d,h=ye&&pt&&Ct(pt),O=(s.clientX-Bt.clientX+r.x)/(c||1)+(h?h[0]-Ne[0]:0)/(c||1),y=(s.clientY-Bt.clientY+r.y)/(p||1)+(h?h[1]-Ne[1]:0)/(p||1);if(!I.active&&!Ht){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(n,!0)}if(T){a?(a.e+=O-(Le||0),a.f+=y-(Ze||0)):a={a:1,b:0,c:0,d:1,e:O,f:y};var D="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");l(T,"webkitTransform",D),l(T,"mozTransform",D),l(T,"msTransform",D),l(T,"transform",D),Le=O,Ze=y,It=s}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!T){var n=this.options.fallbackOnBody?document.body:q,e=v(_,!0,ye,!0,n),o=this.options;if(ye){for(pt=n;"static"===l(pt,"position")&&"none"===l(pt,"transform")&&pt!==document;)pt=pt.parentNode;pt!==document.body&&pt!==document.documentElement?(pt===document&&(pt=g()),e.top+=pt.scrollTop,e.left+=pt.scrollLeft):pt=g(),Ne=Ct(pt)}b(T=_.cloneNode(!0),o.ghostClass,!1),b(T,o.fallbackClass,!0),b(T,o.dragClass,!0),l(T,"transition",""),l(T,"transform",""),l(T,"box-sizing","border-box"),l(T,"margin",0),l(T,"top",e.top),l(T,"left",e.left),l(T,"width",e.width),l(T,"height",e.height),l(T,"opacity","0.8"),l(T,"position",ye?"absolute":"fixed"),l(T,"zIndex","100000"),l(T,"pointerEvents","none"),I.ghost=T,n.appendChild(T),l(T,"transform-origin",Ve/parseInt(T.style.width)*100+"% "+ze/parseInt(T.style.height)*100+"%")}},_onDragStart:function(n,e){var o=this,r=n.dataTransfer,s=o.options;gt("dragStart",this,{evt:n}),I.eventCanceled?this._onDrop():(gt("setupClone",this),I.eventCanceled||((tt=Pe(_)).removeAttribute("id"),tt.draggable=!1,tt.style["will-change"]="",this._hideClone(),b(tt,this.options.chosenClass,!1),I.clone=tt),o.cloneId=Oe(function(){gt("clone",o),!I.eventCanceled&&(o.options.removeCloneOnHide||q.insertBefore(tt,_),o._hideClone(),ht({sortable:o,name:"clone"}))}),!e&&b(_,s.dragClass,!0),e?(he=!0,o._loopId=setInterval(o._emulateDragOver,50)):(f(document,"mouseup",o._onDrop),f(document,"touchend",o._onDrop),f(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(o,r,_)),x(document,"drop",o),l(_,"transform","translateZ(0)")),Ht=!0,o._dragStartId=Oe(o._dragStarted.bind(o,e,n)),x(document,"selectstart",o),zt=!0,window.getSelection().removeAllRanges(),Et&&l(document.body,"user-select","none"))},_onDragOver:function(n){var r,s,a,R,e=this.el,o=n.target,c=this.options,p=c.group,h=I.active,O=fe===p,y=c.sort,D=ut||h,L=this,K=!1;if(!ke){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),o=F(o,c.draggable,e,!0),mt("dragOver"),I.eventCanceled)return K;if(_.contains(n.target)||o.animated&&o.animatingX&&o.animatingY||L._ignoreWhileAnimating===o)return N(!1);if(he=!1,h&&!c.disabled&&(O?y||(a=et!==q):ut===this||(this.lastPutMode=fe.checkPull(this,h,_,n))&&p.checkPut(this,h,_,n))){if(R="vertical"===this._getDirection(n,o),r=v(_),mt("dragOverValid"),I.eventCanceled)return K;if(a)return et=q,xt(),this._hideClone(),mt("revert"),I.eventCanceled||(jt?q.insertBefore(_,jt):q.appendChild(_)),N(!0);var lt=z(e,c.draggable);if(!lt||function En(i,n,e){var o=v(z(e.el,e.options.draggable)),r=$e(e.el,e.options,T);return n?i.clientX>r.right+10||i.clientY>o.bottom&&i.clientX>o.left:i.clientY>r.bottom+10||i.clientX>o.right&&i.clientY>o.top}(n,R,this)&&!lt.animated){if(lt===_)return N(!1);if(lt&&e===n.target&&(o=lt),o&&(s=v(o)),!1!==Ce(q,e,_,r,o,s,n,!!o))return xt(),lt&&lt.nextSibling?e.insertBefore(_,lt.nextSibling):e.appendChild(_),et=e,H(),N(!0)}else if(lt&&function Dn(i,n,e){var o=v(k(e.el,0,e.options,!0)),r=$e(e.el,e.options,T);return n?i.clientX<r.left-10||i.clientY<o.top&&i.clientX<o.right:i.clientY<r.top-10||i.clientY<o.bottom&&i.clientX<o.left}(n,R,this)){var Pt=k(e,0,c,!0);if(Pt===_)return N(!1);if(s=v(o=Pt),!1!==Ce(q,e,_,r,o,s,n,!1))return xt(),e.insertBefore(_,Pt),et=e,H(),N(!0)}else if(o.parentNode===e){s=v(o);var Dt,Ut,At,ae=_.parentNode!==e,yt=!function(n,e,o){var r=o?n.left:n.top,c=o?e.left:e.top;return r===c||(o?n.right:n.bottom)===(o?e.right:e.bottom)||r+(o?n.width:n.height)/2===c+(o?e.width:e.height)/2}(_.animated&&_.toRect||r,o.animated&&o.toRect||s,R),le=R?"top":"left",Ft=C(o,"top","top")||C(_,"top","top"),ce=Ft?Ft.scrollTop:void 0;if(Wt!==o&&(Ut=s[le],ee=!1,ge=!yt&&c.invertSwap||ae),Dt=function In(i,n,e,o,r,s,a,c){var p=o?i.clientY:i.clientX,h=o?e.height:e.width,O=o?e.top:e.left,y=o?e.bottom:e.right,D=!1;if(!a)if(c&&ve<h*r){if(!ee&&(1===te?p>O+h*s/2:p<y-h*s/2)&&(ee=!0),ee)D=!0;else if(1===te?p<O+ve:p>y-ve)return-te}else if(p>O+h*(1-r)/2&&p<y-h*(1-r)/2)return function wn(i){return Z(_)<Z(i)?1:-1}(n);return(D=D||a)&&(p<O+h*s/2||p>y-h*s/2)?p>O+h/2?1:-1:0}(n,o,s,R,yt?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,ge,Wt===o),0!==Dt){var Yt=Z(_);do{At=et.children[Yt-=Dt]}while(At&&("none"===l(At,"display")||At===T))}if(0===Dt||At===o)return N(!1);Wt=o,te=Dt;var de=o.nextElementSibling,Rt=!1,we=Ce(q,e,_,r,o,s,n,Rt=1===Dt);if(!1!==we)return(1===we||-1===we)&&(Rt=1===we),ke=!0,setTimeout(xn,30),xt(),Rt&&!de?e.appendChild(_):o.parentNode.insertBefore(_,Rt?de:o),Ft&&qe(Ft,0,ce-Ft.scrollTop),et=_.parentNode,void 0!==Ut&&!ge&&(ve=Math.abs(Ut-v(o)[le])),H(),N(!0)}if(e.contains(_))return N(!1)}return!1}function mt(ue,Rn){gt(ue,L,U({evt:n,isOwner:O,axis:R?"vertical":"horizontal",revert:a,dragRect:r,targetRect:s,canSort:y,fromSortable:D,target:o,completed:N,onMove:function(un,jn){return Ce(q,e,_,r,un,v(un),n,jn)},changed:H},Rn))}function xt(){mt("dragOverAnimationCapture"),L.captureAnimationState(),L!==D&&D.captureAnimationState()}function N(ue){return mt("dragOverCompleted",{insertion:ue}),ue&&(O?h._hideClone():h._showClone(L),L!==D&&(b(_,ut?ut.options.ghostClass:h.options.ghostClass,!1),b(_,c.ghostClass,!0)),ut!==L&&L!==I.active?ut=L:L===I.active&&ut&&(ut=null),D===L&&(L._ignoreWhileAnimating=o),L.animateAll(function(){mt("dragOverAnimationComplete"),L._ignoreWhileAnimating=null}),L!==D&&(D.animateAll(),D._ignoreWhileAnimating=null)),(o===_&&!_.animated||o===e&&!o.animated)&&(Wt=null),!c.dragoverBubble&&!n.rootEl&&o!==document&&(_.parentNode[dt]._isOutsideThisEl(n.target),!ue&&Kt(n)),!c.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),K=!0}function H(){_t=Z(_),kt=Z(_,c.draggable),ht({sortable:L,name:"change",toEl:e,newIndex:_t,newDraggableIndex:kt,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){f(document,"mousemove",this._onTouchMove),f(document,"touchmove",this._onTouchMove),f(document,"pointermove",this._onTouchMove),f(document,"dragover",Kt),f(document,"mousemove",Kt),f(document,"touchmove",Kt)},_offUpEvents:function(){var n=this.el.ownerDocument;f(n,"mouseup",this._onDrop),f(n,"touchend",this._onDrop),f(n,"pointerup",this._onDrop),f(n,"pointercancel",this._onDrop),f(n,"touchcancel",this._onDrop),f(document,"selectstart",this)},_onDrop:function(n){var e=this.el,o=this.options;_t=Z(_),kt=Z(_,o.draggable),gt("drop",this,{evt:n}),et=_&&_.parentNode,_t=Z(_),kt=Z(_,o.draggable),I.eventCanceled||(Ht=!1,ge=!1,ee=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Re(this.cloneId),Re(this._dragStartId),this.nativeDraggable&&(f(document,"drop",this),f(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Et&&l(document.body,"user-select",""),l(_,"transform",""),n&&(zt&&(n.cancelable&&n.preventDefault(),!o.dropBubble&&n.stopPropagation()),T&&T.parentNode&&T.parentNode.removeChild(T),(q===et||ut&&"clone"!==ut.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),_&&(this.nativeDraggable&&f(_,"dragend",this),Fe(_),_.style["will-change"]="",zt&&!Ht&&b(_,ut?ut.options.ghostClass:this.options.ghostClass,!1),b(_,this.options.chosenClass,!1),ht({sortable:this,name:"unchoose",toEl:et,newIndex:null,newDraggableIndex:null,originalEvent:n}),q!==et?(_t>=0&&(ht({rootEl:et,name:"add",toEl:et,fromEl:q,originalEvent:n}),ht({sortable:this,name:"remove",toEl:et,originalEvent:n}),ht({rootEl:et,name:"sort",toEl:et,fromEl:q,originalEvent:n}),ht({sortable:this,name:"sort",toEl:et,originalEvent:n})),ut&&ut.save()):_t!==Jt&&_t>=0&&(ht({sortable:this,name:"update",toEl:et,originalEvent:n}),ht({sortable:this,name:"sort",toEl:et,originalEvent:n})),I.active&&((null==_t||-1===_t)&&(_t=Jt,kt=Vt),ht({sortable:this,name:"end",toEl:et,originalEvent:n}),this.save())))),this._nulling()},_nulling:function(){gt("nulling",this),q=_=et=T=jt=tt=pe=Nt=Bt=It=zt=_t=kt=Jt=Vt=Wt=te=ut=fe=I.dragged=I.ghost=I.clone=I.active=null,_e.forEach(function(n){n.checked=!0}),_e.length=Le=Ze=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":_&&(this._onDragOver(n),function On(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}(n));break;case"selectstart":n.preventDefault()}},toArray:function(){for(var e,n=[],o=this.el.children,r=0,s=o.length,a=this.options;r<s;r++)F(e=o[r],a.draggable,this.el,!1)&&n.push(e.getAttribute(a.dataIdAttr)||Sn(e));return n},sort:function(n,e){var o={},r=this.el;this.toArray().forEach(function(s,a){var c=r.children[a];F(c,this.options.draggable,r,!1)&&(o[s]=c)},this),e&&this.captureAnimationState(),n.forEach(function(s){o[s]&&(r.removeChild(o[s]),r.appendChild(o[s]))}),e&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,e){return F(n,e||this.options.draggable,this.el,!1)},option:function(n,e){var o=this.options;if(void 0===e)return o[n];var r=Xt.modifyOption(this,n,e);o[n]=typeof r<"u"?r:e,"group"===n&&on(o)},destroy:function(){gt("destroy",this);var n=this.el;n[dt]=null,f(n,"mousedown",this._onTapStart),f(n,"touchstart",this._onTapStart),f(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(f(n,"dragover",this),f(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),me.splice(me.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!Nt){if(gt("hideClone",this),I.eventCanceled)return;l(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),Nt=!0}},_showClone:function(n){if("clone"===n.lastPutMode){if(Nt){if(gt("showClone",this),I.eventCanceled)return;_.parentNode!=q||this.options.group.revertClone?jt?q.insertBefore(tt,jt):q.appendChild(tt):q.insertBefore(tt,_),this.options.group.revertClone&&this.animate(_,tt),l(tt,"display",""),Nt=!1}}else this._hideClone()}},be&&x(document,"touchmove",function(i){(I.active||Ht)&&i.cancelable&&i.preventDefault()}),I.utils={on:x,off:f,css:l,find:u,is:function(n,e){return!!F(n,e,n,!1)},extend:function pn(i,n){if(i&&n)for(var e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i},throttle:Qe,closest:F,toggleClass:b,clone:Pe,index:Z,nextTick:Oe,cancelNextTick:Re,detectDirection:nn,getChild:k,expando:dt},I.get=function(i){return i[dt]},I.mount=function(){for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];n[0].constructor===Array&&(n=n[0]),n.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(I.utils=U(U({},I.utils),o.utils)),Xt.mount(o)})},I.create=function(i,n){return new I(i,n)},I.version="1.15.6";var ne,je,Ke,Ue,xe,oe,it=[],Be=!1;function De(){it.forEach(function(i){clearInterval(i.pid)}),it=[]}function an(){clearInterval(oe)}var Ye=Qe(function(i,n,e,o){if(n.scroll){var O,r=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,a=n.scrollSensitivity,c=n.scrollSpeed,p=g(),h=!1;je!==e&&(je=e,De(),O=n.scrollFn,!0===(ne=n.scroll)&&(ne=Zt(e,!0)));var y=0,D=ne;do{var R=D,L=v(R),K=L.top,mt=L.bottom,xt=L.left,N=L.right,H=L.width,lt=L.height,Pt=void 0,Dt=void 0,Ut=R.scrollWidth,ae=R.scrollHeight,yt=l(R),le=R.scrollLeft,Ft=R.scrollTop;R===p?(Pt=H<Ut&&("auto"===yt.overflowX||"scroll"===yt.overflowX||"visible"===yt.overflowX),Dt=lt<ae&&("auto"===yt.overflowY||"scroll"===yt.overflowY||"visible"===yt.overflowY)):(Pt=H<Ut&&("auto"===yt.overflowX||"scroll"===yt.overflowX),Dt=lt<ae&&("auto"===yt.overflowY||"scroll"===yt.overflowY));var ce=Pt&&(Math.abs(N-r)<=a&&le+H<Ut)-(Math.abs(xt-r)<=a&&!!le),At=Dt&&(Math.abs(mt-s)<=a&&Ft+lt<ae)-(Math.abs(K-s)<=a&&!!Ft);if(!it[y])for(var Yt=0;Yt<=y;Yt++)it[Yt]||(it[Yt]={});(it[y].vx!=ce||it[y].vy!=At||it[y].el!==R)&&(it[y].el=R,it[y].vx=ce,it[y].vy=At,clearInterval(it[y].pid),(0!=ce||0!=At)&&(h=!0,it[y].pid=setInterval(function(){o&&0===this.layer&&I.active._onTouchMove(xe);var de=it[this.layer].vy?it[this.layer].vy*c:0,Rt=it[this.layer].vx?it[this.layer].vx*c:0;"function"==typeof O&&"continue"!==O.call(I.dragged.parentNode[dt],Rt,de,i,xe,it[this.layer].el)||qe(it[this.layer].el,Rt,de)}.bind({layer:y}),24))),y++}while(n.bubbleScroll&&D!==p&&(D=Zt(D,!1)));Be=h}},30),ln=function(n){var e=n.originalEvent,o=n.putSortable,r=n.dragEl,a=n.dispatchSortableEvent,p=n.unhideGhostForTarget;if(e){var h=o||n.activeSortable;(0,n.hideGhostForTarget)();var O=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,y=document.elementFromPoint(O.clientX,O.clientY);p(),h&&!h.el.contains(y)&&(a("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function Ge(){}function Je(){}Ge.prototype={startIndex:null,dragStart:function(n){this.startIndex=n.oldDraggableIndex},onSpill:function(n){var e=n.dragEl,o=n.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=k(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:ln},S(Ge,{pluginName:"revertOnSpill"}),Je.prototype={onSpill:function(n){var e=n.dragEl,r=n.putSortable||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:ln},S(Je,{pluginName:"removeOnSpill"}),I.mount(new function Pn(){function i(){for(var n in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this))}return i.prototype={dragStarted:function(e){var o=e.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):x(document,this.options.supportPointer?"pointermove":o.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var o=e.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):(f(document,"pointermove",this._handleFallbackAutoScroll),f(document,"touchmove",this._handleFallbackAutoScroll),f(document,"mousemove",this._handleFallbackAutoScroll)),an(),De(),function fn(){clearTimeout(qt),qt=void 0}()},nulling:function(){xe=je=ne=Be=oe=Ke=Ue=null,it.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,o){var r=this,s=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,c=document.elementFromPoint(s,a);if(xe=e,o||this.options.forceAutoScrollFallback||ft||W||Et){Ye(e,this.options,c,o);var p=Zt(c,!0);Be&&(!oe||s!==Ke||a!==Ue)&&(oe&&an(),oe=setInterval(function(){var h=Zt(document.elementFromPoint(s,a),!0);h!==p&&(p=h,De()),Ye(e,r.options,h,o)},10),Ke=s,Ue=a)}else{if(!this.options.bubbleScroll||Zt(c,!0)===g())return void De();Ye(e,this.options,Zt(c,!1),!1)}}},S(i,{pluginName:"scroll",initializeByDefault:!0})}),I.mount(Je,Ge);const He=I,dn=new t.OlP("Global config for sortablejs");class Ln{constructor(n){this.target=n}insert(n,e){this.isFormArray?this.target.insert(n,e):this.target.splice(n,0,e)}get(n){return this.isFormArray?this.target.at(n):this.target[n]}remove(n){let e;return this.isFormArray?(e=this.target.at(n),this.target.removeAt(n)):e=this.target.splice(n,1)[0],e}get isFormArray(){return!!this.target.at&&!!this.target.insert&&!!this.target.reset}}class We{constructor(n){this.bindings=n.map(e=>new Ln(e))}injectIntoEvery(n,e){this.bindings.forEach((o,r)=>o.insert(n,e[r]))}getFromEvery(n){return this.bindings.map(e=>e.get(n))}extractFromEvery(n){return this.bindings.map(e=>e.remove(n))}get provided(){return!!this.bindings.length}}let Zn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),kn=(()=>{class i{constructor(e,o,r,s,a){this.globalConfig=e,this.service=o,this.element=r,this.zone=s,this.renderer=a,this.sortablejsInit=new t.vpe}ngOnInit(){He&&He.create&&this.create()}ngOnChanges(e){const o=e.sortablejsOptions;if(o&&!o.isFirstChange()){const r=o.previousValue,s=o.currentValue;Object.keys(s).forEach(a=>{s[a]!==r[a]&&this.sortableInstance.option(a,this.options[a])})}}ngOnDestroy(){this.sortableInstance&&this.sortableInstance.destroy()}create(){const e=this.sortablejsContainer?this.element.nativeElement.querySelector(this.sortablejsContainer):this.element.nativeElement;setTimeout(()=>{this.sortableInstance=He.create(e,this.options),this.sortablejsInit.emit(this.sortableInstance)},0)}getBindings(){return this.sortablejs?this.sortablejs instanceof We?this.sortablejs:new We([this.sortablejs]):new We([])}get options(){return{...this.optionsWithoutEvents,...this.overridenOptions}}get optionsWithoutEvents(){return{...this.globalConfig||{},...this.sortablejsOptions||{}}}proxyEvent(e,...o){this.zone.run(()=>{this.optionsWithoutEvents&&this.optionsWithoutEvents[e]&&this.optionsWithoutEvents[e](...o)})}get isCloning(){return"clone"===this.sortableInstance.options.group.checkPull(this.sortableInstance,this.sortableInstance)}clone(e){return(this.sortablejsCloneFunction||(o=>o))(e)}get overridenOptions(){return{onAdd:e=>{this.service.transfer=o=>{this.getBindings().injectIntoEvery(e.newIndex,o),this.proxyEvent("onAdd",e)},this.proxyEvent("onAddOriginal",e)},onRemove:e=>{const o=this.getBindings();o.provided&&(this.isCloning?(this.service.transfer(o.getFromEvery(e.oldIndex).map(r=>this.clone(r))),this.renderer.removeChild(e.item.parentNode,e.item),this.renderer.insertBefore(e.clone.parentNode,e.item,e.clone),this.renderer.removeChild(e.clone.parentNode,e.clone)):this.service.transfer(o.extractFromEvery(e.oldIndex)),this.service.transfer=null),this.proxyEvent("onRemove",e)},onUpdate:e=>{const o=this.getBindings(),r=(i=>i.hasOwnProperty("newDraggableIndex")&&i.hasOwnProperty("oldDraggableIndex")?{new:i.newDraggableIndex,old:i.oldDraggableIndex}:{new:i.newIndex,old:i.oldIndex})(e);o.injectIntoEvery(r.new,o.extractFromEvery(r.old)),this.proxyEvent("onUpdate",e)}}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(dn,8),t.Y36(Zn),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Qsj))},i.\u0275dir=t.lG2({type:i,selectors:[["","sortablejs",""]],inputs:{sortablejs:"sortablejs",sortablejsContainer:"sortablejsContainer",sortablejsOptions:"sortablejsOptions",sortablejsCloneFunction:"sortablejsCloneFunction"},outputs:{sortablejsInit:"sortablejsInit"},features:[t.TTD]}),i})(),Fn=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:dn,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})()}}]);